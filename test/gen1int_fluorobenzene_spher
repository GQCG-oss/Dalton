#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi

#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > gen1int_fluorobenzene_spher.info <<'%EOF%'
   gen1int_fluorobenzene_spher
   -------------
   Molecule:         C6H5F
   Test Purpose:     Check Gen1int module using fluorobenzene molecule,
                     spherical basis sets, and without symmetry
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > gen1int_fluorobenzene_spher.mol <<'%EOF%'
ATOMBASIS
test GEN1INT using fluorobenzene molecule (without symmetry)
you may test f, g, h,i orbitals using cc-pVTZ, cc-pVQZ, cc-pV5Z, cc-pV6Z
Atomtypes=3  Charge=0  Nosymmetry
Charge=6.0  Atoms=6  Basis=cc-pVTZ
C1         0.0000000000           -3.6019849275            0.0000000000
C2         2.2746863692           -2.2844271478            0.0000000000
C3        -2.2746863692           -2.2844271478            0.0000000000
C4         2.2916299551            0.3437123383            0.0000000000
C5        -2.2916299551            0.3437123383            0.0000000000
C6         0.0000000000            1.6046504042            0.0000000000
Charge=9.0  Atoms=1  Basis=cc-pV6Z
F1         0.0000000000            4.1568833610            0.0000000000
Charge=1.0  Atoms=5  Basis=cc-pVQZ
H1         0.0000000000           -5.6456667396            0.0000000000
H2         4.0333157589            1.4110328255            0.0000000000
H3        -4.0333157589            1.4110328255            0.0000000000
H4         4.0486115823           -3.3009875717            0.0000000000
H5        -4.0486115823           -3.3009875717            0.0000000000
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > gen1int_fluorobenzene_spher.dal <<'%EOF%'
**DALTON INPUT
.INTEGRALS
.DIRECT
**INTEGRAL
.GENINT
*END OF
**END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >gen1int_fluorobenzene_spher.check
cat >>gen1int_fluorobenzene_spher.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi

# gets the number of failed Gen1Int tests
NUM_FAILED=`$GREP "Gen1Int failed" $log | wc -l`

if [ $NUM_FAILED -eq 0 ]
then
  NUM_ERROR=`$GREP "ERROR" $log | wc -l`
  if [ $NUM_ERROR -eq 0 ]
  then
    echo TEST ENDED PROPERLY
    exit 0
  else
    echo THERE IS A PROBLEM 
    exit 1
  fi
else
  echo THERE IS A PROBLEM 
  exit 1
fi
%EOF%
