#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > prop_ecd.info <<'%EOF%'
   prop_ecd
   --------
   Molecule:         C2H4
   Wave Function:    SCF
   Test Purpose:     Electronic circular dichroism parameters (ECD)
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > prop_ecd.mol <<'%EOF%'
INTGRL
Electronic circular dichroism parameters

    2    1 YZ      *  1.00D-13
        6.    1    2    1    1
C#1   0.000000            0.000000           0.666000                 *
  12   5
4233.     .001220
634.9     .009342
146.1     .045452
42.50     .154657
14.19     .358866
5.148     .438632
1.967     .145918
5.148               -0.168367
0.4962              1.060091
0.1533                        1.0
0.044                                   1.000
0.017                                             1.000
    7   4
18.16     .018539
3.986     .115436
1.143     .386188
0.3594    0.640114
0.1146              1.0
0.040                         1.000
0.016                                   1.000
        1.    2    1    1
H#1   0.284567           -0.910839           1.192778                 *
H#3  -0.073654            0.946415           1.229639                 *
    4   2
19.2384   .032828
2.89872   .231204
0.653472  .817226
0.177552            1.0
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > prop_ecd.dal <<'%EOF%'
**DALTON INPUT
.RUN PROPERTIES
**WAVE FUNCTIONS
.HF
.TITLE
C2H4
**PROPERTIES
.EXCITA
.ECD
*EXCITA
.MAXPHP
  300
.NEXCIT
    8    8
.PRINT
    1
.ROTVEL
*END OF INPUT
%EOF%
#######################################################################



#######################################################################

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >prop_ecd.check
cat >>prop_ecd.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi

# Atombasis
CRIT1=`$GREP "C\# * 2 * 6\.0000 * 33 * 17 * \[12s7p\|5s4p\]" $log | wc -l`
CRIT2=`$GREP "H\# * 4 * 1\.0000 * 4 * 2 * \[4s\|2s\]" $log | wc -l`
CRIT3=`$GREP "total\: * 6 * 16\.0000 * 82 * 42" $log | wc -l`
TEST[1]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3`
CTRL[1]=3
ERROR[1]="ATOMBASIS NOT READ CORRECTLY"

# Geomatry
CRIT1=`$GREP "Coordinates are entered in Angstroms and converted to atomic units\." $log | wc -l`
CRIT2=`$GREP "Total number of coordinates\: * 18" $log | wc -l`
CRIT3=`$GREP "1 * x * (\-0| 0| \-|  )\.0000000000" $log | wc -l`
CRIT4=`$GREP "2 * y * (\-0| 0| \-|  )\.0000000000" $log | wc -l`
CRIT5=`$GREP "3 * z * 1\.2585576052" $log | wc -l`
CRIT6=`$GREP "4 * x * (\-0| 0| \-|  )\.0000000000" $log | wc -l`
CRIT7=`$GREP "5 * y * (\-0| 0| \-|  )\.0000000000" $log | wc -l`
CRIT8=`$GREP "6 * z * \-1\.2585576052" $log | wc -l`
CRIT9=`$GREP "7 * x * (0| )\.5377536968" $log | wc -l`
CRIT10=`$GREP "8 * y * \-1\.7212362621" $log | wc -l`
CRIT11=`$GREP "9 * z * 2\.2540237586" $log | wc -l`
CRIT12=`$GREP "10 * x * (0| )\.5377536968" $log | wc -l`
CRIT13=`$GREP "11 * y * 1\.7212362621" $log | wc -l`
CRIT14=`$GREP "12 * z * \-2\.2540237586" $log | wc -l`
CRIT15=`$GREP "13 * x * (\-0|\-)\.1391858887" $log | wc -l`
CRIT16=`$GREP "14 * y * 1\.7884651590" $log | wc -l`
CRIT17=`$GREP "15 * z * 2\.3236809536" $log | wc -l`
CRIT18=`$GREP "16 * x * (\-0|\-)\.1391858887" $log | wc -l`
CRIT19=`$GREP "17 * y * \-1\.7884651590" $log | wc -l`
CRIT20=`$GREP "18 * z * \-2\.3236809536" $log | wc -l`
TEST[2]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3 \+ $CRIT4 \+ $CRIT5 \+ $CRIT6 \+ \
		$CRIT7 \+ $CRIT8 \+ $CRIT9 \+ $CRIT10 \+ $CRIT11 \+ $CRIT12 \+ \
		$CRIT13 \+ $CRIT14 \+ $CRIT15 \+ $CRIT16 \+ $CRIT17 \+ $CRIT18 \+ \
		$CRIT19 \+ $CRIT20`
CTRL[2]=20
ERROR[2]="GEOMETRY NOT READ CORRECTLY"

# Symmetry
CRIT1=`$GREP "Number of coordinates in each symmetry\: * 9 * 9" $log | wc -l`
CRIT2=`$GREP "Number of orbitals in each symmetry\: * 21 * 21" $log | wc -l`
TEST[3]=`expr	$CRIT1 \+ $CRIT2`
CTRL[3]=2
ERROR[3]="SYMMETRY NOT CORRECT"

# Energy
CRIT1=`$GREP "Final * HF energy\: * \-77\.9967697486[0-9][0-9]" $log | wc -l`
TEST[4]=`expr	$CRIT1`
CTRL[4]=1
ERROR[4]="ENERGY NOT CORRECT"

# Excitation setup
CRIT1=`$GREP "Number of excitation energies\: * 8 * 8 * 0 * 0 * 0 * 0 * 0 * 0" $log | wc -l`
CRIT2=`$GREP "Conventional rotational strength" $log | wc -l`
CRIT3=`$GREP "Center of mass gauge origin\: * (0| )\.028660 * (0| )\.000000 * (0| )\.000000" $log | wc -l`
TEST[5]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3`
CTRL[5]=3
ERROR[5]="EXCITATION SETUP NOT CORRECT"

# Electric transition dipole moments
CRIT1=`$GREP "1 * 1 * (0| )\.251717 * (0| )\.702 * (0| )\.000 * (0| )\.000 * (0| )\.670 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT2=`$GREP "1 * 2 * (0| )\.286551 * (\-0|\-)\.093 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.099 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT3=`$GREP "1 * 3 * (0| )\.309268 * (0| )\.274 * (0| )\.000 * (0| )\.000 * (0| )\.257 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT4=`$GREP "1 * 4 * (0| )\.315071 * (\-0|\-)\.003 * (0| )\.000 * (0| )\.000 * (0| )\.001 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT5=`$GREP "1 * 5 * (0| )\.357947 * (\-0|\-)\.267 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.188 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT6=`$GREP "1 * 6 * (0| )\.368135 * (\-0|\-)\.128 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.113 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT7=`$GREP "1 * 7 * (0| )\.380247 * (0| )\.374 * (0| )\.000 * (0| )\.000 * (0| )\.338 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT8=`$GREP "1 * 8 * (0| )\.390742 * (\-0|\-)\.043 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.047 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT9=`$GREP "2 * 1 * (0| )\.248586 * (0| )\.000 * (0| )\.004 * 1\.093 * (0| )\.000 * (0| )\.001 * 1\.316" $log | wc -l`
CRIT10=`$GREP "2 * 2 * (0| )\.273424 * (0| )\.000 * (\-0|\-)\.018 * (0| )\.168 * (0| )\.000 * (\-0|\-)\.028 * (0| )\.208" $log | wc -l`
CRIT11=`$GREP "2 * 3 * (0| )\.279423 * (0| )\.000 * (\-0|\-)\.225 * (0| )\.086 * (0| )\.000 * (\-0|\-)\.229 * (0| )\.090" $log | wc -l`
CRIT12=`$GREP "2 * 4 * (0| )\.323006 * (0| )\.000 * (0| )\.012 * (\-0|\-)\.004 * (0| )\.000 * (0| )\.007 * (0| )\.013" $log | wc -l`
CRIT13=`$GREP "2 * 5 * (0| )\.335031 * (0| )\.000 * (0| )\.167 * (\-0|\-)\.060 * (0| )\.000 * (0| )\.174 * (\-0|\-)\.073" $log | wc -l`
CRIT14=`$GREP "2 * 6 * (0| )\.341675 * (0| )\.000 * (0| )\.048 * (\-0|\-)\.459 * (0| )\.000 * (0| )\.032 * (\-0|\-)\.533" $log | wc -l`
CRIT15=`$GREP "2 * 7 * (0| )\.349583 * (0| )\.000 * (0| )\.046 * (\-0|\-)\.519 * (0| )\.000 * (0| )\.036 * (\-0|\-)\.622" $log | wc -l`
CRIT16=`$GREP "2 * 8 * (0| )\.358428 * (0| )\.000 * (\-0|\-)\.105 * (0| )\.290 * (0| )\.000 * (\-0|\-)\.112 * (0| )\.278" $log | wc -l`
CRIT17=`$GREP "1 * 1 * (0| )\.251717 * (\-0|\-)\.702 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.670 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT18=`$GREP "1 * 2 * (0| )\.286551 * (0| )\.093 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.099 * (0| |\-0\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT19=`$GREP "1 * 3 * (0| )\.309268 * (\-0|\-)\.274 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.257 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT20=`$GREP "1 * 4 * (0| )\.315071 * (0|)\.003 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.001 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT21=`$GREP "1 * 5 * (0| )\.357947 * (0| )\.267 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.188 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT22=`$GREP "1 * 6 * (0| )\.368135 * (0| )\.128 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.113 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT23=`$GREP "1 * 7 * (0| )\.380247 * (\-0|\-)\.374 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.338 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT24=`$GREP "1 * 8 * (0| )\.390742 * (0| )\.043 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.047 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT25=`$GREP "2 * 1 * (0| )\.248586 * (0| |\-0|\-)\.000 * (\-0|\-)\.004 * -1\.093 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.001 * -1\.316" $log | wc -l`
CRIT26=`$GREP "2 * 2 * (0| )\.273424 * (0| |\-0|\-)\.000 * (0| )\.018 * (\-0|\-)\.168 * (0| |\-0|\-)\.000 * (0| )\.028 * (\-0|\-)\.208" $log | wc -l`
CRIT27=`$GREP "2 * 3 * (0| )\.279423 * (0| |\-|\-)\.000 * (0| )\.225 * (\-0|\-)\.086 * (0| |\-0|\-)\.000 * (0| )\.229 * (\-0|\-)\.090" $log | wc -l`
CRIT28=`$GREP "2 * 4 * (0| )\.323006 * (0| |\-0|\-)\.000 * (\-0|\-)\.012 * (0| )\.004 * (0| |\-0|\-)\.000 * (\-0|\-)\.007 * (\-0|\-)\.013" $log | wc -l`
CRIT29=`$GREP "2 * 5 * (0| )\.335031 * (0| |\-0|\-)\.000 * (\-0|\-)\.167 * (0| )\.060 * (0| |\-0|\-)\.000 * (\-0|\-)\.174 * (0| )\.073" $log | wc -l`
CRIT30=`$GREP "2 * 6 * (0| )\.341675 * (0| |\-0|\-)\.000 * (\-0|\-)\.048 * (0| )\.459 * (0| |\-0|\-)\.000 * (\-0|\-)\.032 * (0| )\.533" $log | wc -l`
CRIT31=`$GREP "2 * 7 * (0| )\.349583 * (0| |\-0|\-)\.000 * (\-0|\-)\.046 * (0| )\.519 * (0| |\-0|\-)\.000 * (\-0|\-)\.036 * (0| )\.622" $log | wc -l`
CRIT32=`$GREP "2 * 8 * (0| )\.358428 * (0| |\-0|\-)\.000 * (0| )\.105 * (0| |\-0|\-)\.290 * (0| |\-0|\-)\.000 * (0| )\.112 * (\-0|\-)\.278" $log | wc -l`
TEST[6]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3 \+ $CRIT4 \+ $CRIT5 \+ $CRIT6 \+ \
		$CRIT7 \+ $CRIT8 \+ $CRIT9 \+ $CRIT10 \+ $CRIT11 \+ $CRIT12 \+ \
		$CRIT13 \+ $CRIT14 \+ $CRIT15 \+ $CRIT16 \+ $CRIT17 \+ $CRIT18\
	     \+ $CRIT19 \+ $CRIT20 \+ $CRIT21 \+ $CRIT22 \+ $CRIT23 \+ $CRIT24\
	     \+ $CRIT25 \+ $CRIT26 \+ $CRIT27 \+ $CRIT28 \+ $CRIT29 \+ $CRIT30\
	     \+ $CRIT31 \+ $CRIT32`
CTRL[6]=16
ERROR[6]="ELECTRIC TRANSITION DIPOLE MOMENTS NOT CORRECT"

# Magnetic transition dipole moments
CRIT1=`$GREP "1 * 1 * 6\.849565 * (0| )\.155 * (0| )\.000 * (0| )\.000 * (0| )\.165 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT2=`$GREP "1 * 2 * 7\.797454 * (\-0|\-)\.005 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.005 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT3=`$GREP "1 * 3 * 8\.415620 * (0| )\.127 * (0| )\.000 * (0| )\.000 * (0| )\.136 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT4=`$GREP "1 * 4 * 8\.573527 * (\-0|\-)\.001 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.001 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT5=`$GREP "1 * 5 * 9\.740223 * (\-0|\-)\.108 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.120 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT6=`$GREP "1 * 6 * 10\.017473 * (\-0|\-)\.013 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.014 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT7=`$GREP "1 * 7 * 10\.347039 * (0| )\.204 * (0| )\.000 * (0| )\.000 * (0| )\.225 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT8=`$GREP "1 * 8 * 10\.632636 * (\-0|\-)\.019 * (0| )\.000 * (0| )\.000 * (\-0|\-)\.019 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT9=`$GREP "2 * 1 * 6\.764378 * (0| )\.000 * (0| )\.076 * (0| )\.255 * (0| )\.000 * (0| )\.084 * (0| )\.276" $log | wc -l`
CRIT10=`$GREP "2 * 2 * 7\.440248 * (0| )\.000 * (\-0|\-)\.010 * (0| )\.026 * (0| )\.000 * (\-0|\-)\.012 * (0| )\.026" $log | wc -l`
CRIT11=`$GREP "2 * 3 * 7\.603476 * (0| )\.000 * (0| )\.004 * (\-0|\-)\.005 * (0| )\.000 * (0| )\.008 * (\-0|\-)\.005" $log | wc -l`
CRIT12=`$GREP "2 * 4 * 8\.789439 * (0| )\.000 * (0| )\.028 * (0| )\.155 * (0| )\.000 * (0| )\.025 * (0| )\.165" $log | wc -l`
CRIT13=`$GREP "2 * 5 * 9\.116657 * (0| )\.000 * (\-0|\-)\.066 * (0| )\.034 * (0| )\.000 * (\-0|\-)\.028 * (0| )\.036" $log | wc -l`
CRIT14=`$GREP "2 * 6 * 9\.297436 * (0| )\.000 * (\-0|\-)\.123 * (0| )\.536 * (0| )\.000 * (\-0|\-)\.140 * (0| )\.560" $log | wc -l`
CRIT15=`$GREP "2 * 7 * 9\.512649 * (0| )\.000 * (\-0|\-)\.117 * (0| )\.267 * (0| )\.000 * (\-0|\-)\.126 * (0| )\.284" $log | wc -l`
CRIT16=`$GREP "2 * 8 * 9\.75333(4|5) * (0| )\.000 * (\-0|\-)\.838 * (\-0|\-)\.104 * (0| )\.000 * (\-0|\-)\.895 * (\-0|\-)\.108" $log | wc -l`
CRIT17=`$GREP "1 * 1 * 6\.849565 * (\-0|\-)\.155 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.165 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT18=`$GREP "1 * 2 * 7\.797454 * (0| )\.005 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.005 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT19=`$GREP "1 * 3 * 8\.415620 * (\-0|\-)\.127 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.136 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT20=`$GREP "1 * 4 * 8\.573527 * (0| )\.001 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.001 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT21=`$GREP "1 * 5 * 9\.740223 * (0| )\.108 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.120 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT22=`$GREP "1 * 6 * 10\.017473 * (0| )\.013 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.014 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT23=`$GREP "1 * 7 * 10\.347039 * (\-0|\-)\.204 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (\-0|\-)\.225 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT24=`$GREP "1 * 8 * 10\.632636 * (0| )\.019 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000 * (0| )\.019 * (0| |\-0|\-)\.000 * (0| |\-0|\-)\.000" $log | wc -l`
CRIT25=`$GREP "2 * 1 * 6\.764378 * (0| |\-0|\-)\.000 * (\-0|\-)\.076 * (\-0|\-)\.255 * (0| |\-0|\-)\.000 * (\-0|\-)\.084 * (\-0|\-)\.276" $log | wc -l`
CRIT26=`$GREP "2 * 2 * 7\.440248 * (0| |\-0|\-)\.000 * (0| )\.010 * (\-0|\-)\.026 * (0| |\-0|\-)\.000 * (0| )\.012 * (\-0|\-)\.026" $log | wc -l`
CRIT27=`$GREP "2 * 3 * 7\.603476 * (0| |\-0|\-)\.000 * (\-0|\-)\.004 * (0| )\.005 * (0| |\-0|\-)\.000 * (\-0|\-)\.008 * (0| )\.005" $log | wc -l`
CRIT28=`$GREP "2 * 4 * 8\.789439 * (0| |\-0|\-)\.000 * (\-0|\-)\.028 * (\-0|\-)\.155 * (0| |\-0|\-)\.000 * (\-0|\-)\.025 * (\-0|\-)\.165" $log | wc -l`
CRIT29=`$GREP "2 * 5 * 9\.116657 * (0| |\-0|\-)\.000 * (0| )\.066 * (\-0|\-)\.034 * (0| |\-0|\-)\.000 * (0| )\.028 * (\-0|\-)\.036" $log | wc -l`
CRIT30=`$GREP "2 * 6 * 9\.297436 * (0| |\-0|\-)\.000 * (0| )\.123 * (\-0|\-)\.536 * (0| |\-0|\-)\.000 * (0| )\.140 * (\-0|\-)\.560" $log | wc -l`
CRIT31=`$GREP "2 * 7 * 9\.512649 * (0| |\-0|\-)\.000 * (0| )\.117 * (\-0|\-)\.267 * (0| |\-0|\-)\.000 * (0| )\.126 * (\-0|\-)\.284" $log | wc -l`
CRIT32=`$GREP "2 * 8 * 9\.75333(4|5) * (0| |\-0|\-)\.000 * (0| )\.838 * (0| )\.104 * (0| |\-0|\-)\.000 * (0| )\.895 * (0| )\.108" $log | wc -l`
TEST[7]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3 \+ $CRIT4 \+ $CRIT5 \+ $CRIT6 \+ \
		$CRIT7 \+ $CRIT8 \+ $CRIT9 \+ $CRIT10 \+ $CRIT11 \+ $CRIT12 \+ \
		$CRIT13 \+ $CRIT14 \+ $CRIT15 \+ $CRIT16 \+ $CRIT17 \+ $CRIT18\
	     \+ $CRIT19 \+ $CRIT20 \+ $CRIT21 \+ $CRIT22 \+ $CRIT23 \+ $CRIT24\
	     \+ $CRIT25 \+ $CRIT26 \+ $CRIT27 \+ $CRIT28 \+ $CRIT29 \+ $CRIT30\
	     \+ $CRIT31 \+ $CRIT32`
CTRL[7]=16
ERROR[7]="MAGNETIC TRANSITION DIPOLE MOMENTS NOT CORRECT"

# Oscillator and Rotational Strengths
CRIT1=`$GREP "1 * 1 * 6\.849565 * (0| )\.0826 * (0| )\.0754 * \-51\.307 * \-49\.017 * \-52\.170" $log | wc -l`
CRIT2=`$GREP "1 * 2 * 7\.797454 * (0| )\.0016 * (0| )\.0019 * (\-0|\-)\.215 * (\-0|\-)\.228 * (\-0|\-)\.227" $log | wc -l`
CRIT3=`$GREP "1 * 3 * 8\.415620 * (0| )\.0155 * (0| )\.0136 * \-16\.435 * \-15\.403 * \-16\.509" $log | wc -l`
CRIT4=`$GREP "1 * 4 * 8\.573527 * (0| )\.0000 * (0| )\.0000 * (\-0|\-)\.002 * (0| )\.000 * (0| )\.000" $log | wc -l`
CRIT5=`$GREP "1 * 5 * 9\.740223 * (0| )\.0170 * (0| )\.0084 * \-13\.643 * \-9\.581 * \-10\.608" $log | wc -l`
CRIT6=`$GREP "1 * 6 * 10\.017473 * (0| )\.0040 * (0| )\.0031 * (\-0|\-)\.771 * (\-0|\-)\.679 * (\-0|\-)\.728" $log | wc -l`
CRIT7=`$GREP "1 * 7 * 10\.347039 * (0| )\.0356 * (0| )\.0290 * \-36\.047 * \-32\.555 * \-35\.819" $log | wc -l`
CRIT8=`$GREP "1 * 8 * 10\.632636 * (0| )\.0005 * (0| )\.0006 * (\-0|\-)\.385 * (\-0|\-)\.416 * (\-0|\-)\.411" $log | wc -l`
CRIT9=`$GREP "2 * 1 * 6\.764378 * (0| )\.1978 * (0| )\.2870 * \-131\.353 \-158\.057 \-171\.114" $log | wc -l`
CRIT10=`$GREP "2 * 2 * 7\.440248 * (0| )\.0052 * (0| )\.0080 * \-2\.164 * \-2\.700 * \-2\.679" $log | wc -l`
CRIT11=`$GREP "2 * 3 * 7\.603476 * (0| )\.0108 * (0| )\.0113 * (0| )\.684 * (0| )\.702 * 1\.090" $log | wc -l`
CRIT12=`$GREP "2 * 4 * 8\.789439 * (0| )\.0000 * (0| )\.0000 * (0| )\.110 * \-1\.010 * \-1\.062" $log | wc -l`
CRIT13=`$GREP "2 * 5 * 9\.116657 * (0| )\.0071 * (0| )\.0080 * 6\.137 * 6\.558 * 3\.501" $log | wc -l`
CRIT14=`$GREP "2 * 6 * 9\.297436 * (0| )\.0485 * (0| )\.0650 * 118\.801 * 136\.694 * 142\.811" $log | wc -l`
CRIT15=`$GREP "2 * 7 * 9\.512649 * (0| )\.0632 * (0| )\.0906 * 67\.901 * 80\.420 * 85\.59(3|4)" $log | wc -l`
CRIT16=`$GREP "2 * 8 * 9\.75333(4|5) * (0| )\.0227 * (0| )\.0215 * \-27\.336 * \-30\.587 * \-33\.045" $log | wc -l`
TEST[8]=`expr	$CRIT1 \+ $CRIT2 \+ $CRIT3 \+ $CRIT4 \+ $CRIT5 \+ $CRIT6 \+ \
		$CRIT7 \+ $CRIT8 \+ $CRIT9 \+ $CRIT10 \+ $CRIT11 \+ $CRIT12 \+ \
		$CRIT13 \+ $CRIT14 \+ $CRIT15 \+ $CRIT16`
CTRL[8]=16
ERROR[8]="OSCILLATOR AND ROTATIONAL STRENGTHS NOT CORRECT"

PASSED=1
for i in 1 2 3 4 5 6 7 8
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
     echo ${ERROR[i]}
     PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
  echo TEST ENDED PROPERLY
  exit 0
else
  echo THERE IS A PROBLEM
  exit 1
fi

%EOF%
#######################################################################
