2005-12-04  Pawel Salek 

	* configure: recognize gfortran, mostly works with
	4.0.2 20051125 (Red Hat 4.0.2-8)
	* abacus/herrdn.F: workarounds necessary for gfortran.
	* gp/gphjj.F: ditto.
	* dft/general.h: more order in the underscore issue.

2005-11-02  Pawel Salek 

	* dft/dft_int.F: remove redundant common blocks.
	* dft/dso_cb.F: add trivial subroutine getdsosz.
	* dft/eval-dso.c: parallelize.
	* dft/general.[hc]: register DSO slave.
	* dft/{integrator,prop-eval}.c: remove some noise.

2005-05-09  Pawel Salek 

	merge dft-qr-faster.
	* abacus/herdirect.F: fix CAM-B3LYP parallelization.
	* abacus/herpar.F: no need to pass HFXATT to slaves.
	* dft/Makefile: add quad-faster.c 
	* dft/dft_aux.F: add ability to set KSYMOP.
	* dft/dft_ksm.F: partial BLASification from Rafal Podeszwa.
	* dft/dft_rho.F: ditto.
	* dft/general.[hc]: DFT-CR parallelization.
	* dft/grid-gen.c: support for dummy atoms (R. Podeszwa).
	* dft/test/{linear-test,quad-dynamic}.sh: basis sets renamed.
	* include/infpp.h: .SROOTS support.
	* rsp/hypinp.F: compute transition moments only between selected
	excited states.
	* rsp/rspmai.F: related: initialize LCMEXC array.
	* rsp/rspvec.F: use it.
	* rsp/rspqrx3.F: connect quad-faster.
	* sirius/sirinp.F: be professional: check that finite-field
	input.

2005-03-29  Pawel Salek 

	* dft/cube-fast.c: check malloc() results.
	* dft/fun-becke.c: make fourth order follow same format as lower ones.
	* dft/fun-{lyp,slater,vwn}.c: ditto.
	* dft/fun-cam-b3lyp.c: first shot at fourth order (unfinished).
	* dft/functionals.h: reordering of third and fourth order derivatives.
	* dft/general.c: ditto.
	
2005-01-19  Pawel Salek 

	* dalton.gnr: '==' operator is not standard.
	* densfit/denfit_noddy.F: negative numbers cannot be raised to a
	real power.
	* dft/fun-cam-b3lyp.c: clean up, hopefully the last time.
	* dft/general.h: SGI does not define __FUNCTION__ either.

2004-12-14  Pawel Salek 

	* Doc/wfguide.tex: add DFT example.
	* dft/Makefile: add PBE functional that appears to work.
	* dft/fun-gga.c: ditto.
	* dft/functionals.{hc]: PBE+collect all fun_{true,false}() here.
	* dft/fun-*.c: use common fun_{true,false}() functions.
	
2004-11-23  Pawel Salek 

	* dft/Makefile: rename Dirac to Slater to follow other programs.
	* dft/fun-{gga,cam-b3lyp,lb94}.c:
	* dft/functionals.[hc], general.c: associated changes.
	* dft/dft_{aux,int,ksm,rho}.F: remove unused common blocks.

2004-11-13  Pawel Salek 

	* configure: prefer ifc over g77.
	* dft/dft_rho.F: pass three-element array instead of x,y,z.
	* dft/grid-gen.c: parallelize blocked grid generation.
	* dft/prop-eval.c: LR parallelization bug fix from Kenneth.

2004-11-05  Pawel Salek 

	* basis/6-31G: add zinc.
	* dft/grid-gen.c: increase box size from 1.25 to 1.5a.u - the
	difference in performance is small but 1.5 is on the safer side.
	* test/dft_*: recent changes to grid generation introduced
	numerical noise. Adjust the thresholds.
	* test/prop_expgrad: convert to "new" format, update reference values.
	* test/functions: add check_exp_grad test.

2004-10-26  Pawel Salek 

	* dft/dft_aux.F: 
	* dft/dft_rho.F: improve orbital selection.
	* dft/dft_inp.F: send config data to proper logical unit.

2004-10-06  Pawel Salek 

	* abacus/abamag.F: correct statement order.
	* dft/basisinfo.c, grid-gen2.c: compile with older compilers, too.
	* rsp/rspg.F: use correct f77 (required by pgf77).
	* configure: Opteron/pgi/ACML enhancements.

2004-09-25  Pawel Salek 

	* dft/functionals.c: clean up evaluation of second derivatives.
	* dft/dft_hes.F, dft/dft_mag.F: adjust accordingly.
	* dft/prop-eval.c: ditto.
	* dft/fun-cam-b3lyp.c: fixes to second order derivatives.
	* dft/fun-tester.c: Allow testing of only selected derivative orders.
	* dft/general.c: fix in test-only gradient code (found by Rafal
	Podeszwa).
	
2004-05-20  Pawel Salek 

	* dft/dft_aux.F: get_ksymop not used any more: remove.
	* dft/functionals.c: initialize derivative fields correctly.
	* dft/prop-eval.c: cleanup + fix debugging LR code.
	* include/infinp.h: add level shifting field.
	* sirius/sirdiis.F: gradual switching off of level shift.
	* sirius/sirgrad.F: add XC contribution to KS matrix: Fix QCSCF.
	* sirius/sirinp.F: input for level shift.
	* test/dft_lb94: level shift test.
	* test/dft_qr_{no,}sym{,.ref}: fix QR DFT tests.
	* configure: port to Opteron/gcc.
	* dalton.gnr: Fix restart.

2004-04-30  Pawel Salek 

	* abacus/abarlx.F:
	some allocations in abacus are not used.
	disable debugging output.
	* dft/*.F: NGEODRV parameter makes NEEDLAP parameter redundant.

2004-03-03  Pawel Salek 

	* dalton.gnr: create tar.gz in one step.
	* dft/dft_aux.F: add DFTLRSYNC for LR config sync.
	* dft/general.[ch]: adapt parallel code to HEAD.
	* dft/integrator.c: ditto.
	* dft/prop-eval.c: make sure parallel LR works.
	* eri/eri2par.F: add one more MPI slave dispatcher.
	* dft/quad-fast.c: just compile ATM.

2004-02-25  Pawel Salek 

	* dft/dft_inp.F: set ANGINT, not ANGMIN, on .ANGINT keyword.
	* dft/dft_int.F: parallelize (KS build only so far).
	* dft/dft_ksm.F: ditto.
	* dft/general.[hc]: remove part of dft-qr MPI code.
	* dft/grid-gen.[hc]: parallelize with load-balancing.
	* dft/prop-eval.c: disable unused MPI code.
	* eri/eri2par.F: plug dft MPI code in.
	* include/dftcom.h: move MXBLLEN here.
	* sirius/sirinp.F: DFTgetFunc -> DFTsetFunc.
	
2004-02-06  Pawel Salek 

	* dft/dft_grid.F: do not assume s-functions are tightest in LMG
	radial scheme.
	* dft/dft_inp.F: declare LINE to fix .GRID TYPE processing.

2004-01-31  Pawel Salek 

	* dft/{general.[hc],integrator.c,prop-eval.c,quad-fast.c}:
	enable parallel build of dalton (DFT p-n remains to be done)

2003-10-30  13:50 Pawel Salek  <pawsa@theochem.kth.se>

	* configure: recognize icc.
	* dft/dft_ksm.F: cleanup output.
	* sirius/sirinp.F:
	* dft/general.c: implement dft input as agreed.
	* sirius/sirdiis.F: adjust accordingly.

2003-10-25  14:12 Pawel Salek  <pawsa@theochem.kth.se>

	Merge HEAD.
	

2003-10-21  21:00 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftprop.F: fix off-by-one error.
	* dft/dftquad.F: fix symmetry.

2003-10-21  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add dft{prop,quad}.F - alternative implementation.
	* dft/dftaos.F: pass COOR(3,:) instead of CORX(:),CORY(:),CORZ(:).
	* dft/dft{aux,grd}.F: cleanup.
	* dft/functionals.c: fortran interface to functionals.
	* dft/general.c: helper functions belong here.
	* dft/grid-gen.[ch]: change grid file format and API.
	* dft/integrator.[ch]: adapt to above.
	* dft/prop-eval.c: compile against gcc-3.3
	* sirius/sirdiis.F: enable fortran driver routine.

2003-10-16  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/{Makefile,fun-dirac.c,fun-gga.c,general.h}: cleanup.
	* dft/prop-eval.c: cleanup.
	* dft/fun-lb94.c: implement it correctly.

2003-10-13  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/prop-eval.c: fix factor two bug introduced in LR on 2003-09-30.

2003-09-30  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F: cleanup for open shell.
	* dft/integrator.[ch]: adapt blocked integrator for open-shell.
	* dft/prop-eval.c: blocked version of the open shell KS evaluation.
	* sirius/sirdiis.F: use it.

2003-09-25  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/integrator.c: recent changes broke geometry optimization. fix.

2003-09-18  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F: make getexp_blocked_{lda,gga} work with symmetry.
	* dft/prop-eval.c: make linear response work with symmetry.
	* rsp/rspoli.F: enable new blocked code.

2003-08-22  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/integrator.c: shorten vector length if too many nulls.
	* dft/prop-eval.c: same.

2003-08-18  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaos.F: blocked orbital evaluation functions.
	* dft/dftaux.F: blocked density evaluation routines.
	* dft/integrator.[hc]: blocked integrator.
	* dft/prop-eval.c: blocked property evaluators.

2003-08-13  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F: orbital block functions.
	* dft/general.c: implement quit().
	* dft/grid-gen.[hc]: grid generator reworked/SSF done the right way.
	* dft/integrator.c: remove grid-specific code from integrator.

2003-06-13  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-p86c.c: add LR support.
	* dft/fun-gga.c, dft/functionals.[ch]: add BP86, B3P86.

2003-06-11  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile, dft/functionals.[hc]: add PZ81 functional.
	* dft/general.c: handle H atom safely.
	* tools/codegen_maxima.py: clean up (slightly) the generated code.

2003-06-07  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalton.F: add missing IERR to MPI_BCAST() call.
	* dft/integrator.c: user-defined types are broken in ScaMPI
	implementation. Do not use them.

2003-06-03  Pawel Salek  <pawsa@theochem.kth.se>

	* include/{inftap.h,infvar.h,mxcent.h,nuclei.h}: remove variable
	declaration that is not a part of a common block.
	* dft/fun-gga.c: add gaussian's versions of LDA and B3LYP functionals.
	* dft/fun-vwn.c: VWN3 implementation.
	* dft/functionals.[hc]: link VWN3 functional in.
	
2003-05-14  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-*.c: use const for read-only arguments.
	FirstDrv->FirstFunc.
	* dft/functionals.[hc]: ditto.
	* dft/integrator.c: rhoa stores rho_alpha even for closed shell now.
	* dft/general.[ch]: ditto.
	* dft/prop-eval.c, dft/quad-{strict,fast}.c: ditto.
	* dft/gen-so-int.c: 

2003-05-07  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile, dft/functionals.[hc]: add PBE functional.

2003-04-30  Pawel Salek  <pawsa@theochem.kth.se>

	Merge dft-esr branch.
	* configure: add gp_zblas if needed.
	* abacus/aba2tex.F: add ZFS2EL parameter (false for the moment).
	* abacus/abaptr.F: related changes in API and implementation.
	* abacus/abarhs.F: ditto.
	* abacus/her1pro.F: add MNF-SO keyword and AMFI input processing.
	* abacus/her2ave.F: ZFS related changes.
	* abacus/her2drv.F, her2odc.F: ditto.
	* amfi/symtra.F: do not reset IPRINT.
	* dft/general.c: modification of DV for high spin.
	* dft/prop-eval.c: same for LR.
	* gp/mempkg.F: allocate complex arrays.
	* include/gtensor.h: added electronic g-tensor CB.
	* include/inf{inp,orb,rsp}.h: add explicit type defs.
	* include/{thrzer,wrkrsp}.h: ditto.
	* include/inflr.h: add LQRGP
	* pdpack/gp_zlapack.F: add zheev.
	* pdpack/printpkg.F: add COPTPUT for complex output.
	* rsp/Makefile: add rsphso, rspg and rspzfs files.
	* rsp/lagrang.F: add .G-TENSor and ZFS keywords.
	* rsp/qfock.F: QR triplet direct construction + high spin.
	* rsp/qrhso.F: SO code.
	* rsp/rspe2c.F: plug in G-tensor code.
	* rsp/rspmai.F: ditto. HSO input processing.
	* rsp/rspoli.F: high-spin DFT.
	* rsp/rspqrx3.F: high-spin QR.
	* rsp/rspvec.F: high-spin QR.
	* sirius/getcix.F: high-spin fixes.
	* sirius/sir{can,ci,ctl,diis}.F: ditto.
	* sirius/sir{grad,set}.F: ditto.
	* sirius/sirinp.F: input processing.
	* sirius/sirfck.F: scale exchange for direct triplet F
	construction.
	* test/dft_open_b3lyp: fundamental constants changed. Adjust.
	* test/rsp_phosph: ditto.
	* test/functions: testing of arbitrary LR functions.

2003-04-28  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile, dft/functionals.[hc]: register them.
	* dft/fun-{pw86x,p86c}.c: functionals by Olav Fossgaard.
	* dft/fun-lb94.c, dft/fun-pw92.c: functionals by B. Jansik.

	* dft/dftaux.F, dft/dftdrv.F: minor cleanup.
	* dalton.gnr: give better names to restart files.

2003-03-27  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.[hc]: special treatment for the fifth variable.
	* dft/quad-{strict,fast}.c: use the fifth variable.

2003-03-22  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: initial C99 support.
	* dft/Makefile: add gen-so-int.c
	* dft/dftaux.F: save H_SO expectation values.

	* dft/integrator.[ch]: support for prop evaluators requiring
	higher order orbital derivatives.
	* dft/prop-eval.c: adjust to above.
	* include/infrsp.h: keyword to request calculations of H_SO EV:s.
	* rsp/rspmai.F: compute H_SO EV:s if requested.
	
2003-03-11  Pawel Salek  <pawsa@theochem.kth.se>

	merge updates from HEAD, part II.

2003-02-20  Pawel Salek  <pawsa@theochem.kth.se>

	* test/dft_qr_{no,}sym: tests for DFT-QR, grid generators and
	partitioning schemes.
	* test/functions: new testing functions.
	* dft/dftaux.F: unify grid generator mode input parsing.
	* sirius/sirinp.F: ditto.
	* include/dftcom.h: remove unused stuff.
	* dft/dftgrd.F: modularize LMG grid generator.
	* dft/grid-gen.c: SSF article has wrong hardness factors. Adjust.
	* dft/integrator.c: do not use common block values any more.

2003-02-17  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftgrd.F: make radial grid generation more modular.
	* dft/grid-gen.c: accelerate adaptive grid generation.

2003-02-14  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-vwn.c: avoid raising 0 to a fractional power.
	* dft/prop-eval.c: do not do more work than necessary.

2003-02-08  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalgnr.F: IWOFF can't be constant, OPTMIN modifies it.
	* abacus/dalton.F: pass memory size to slaves.

2003-01-10  Pawel Salek  <pawsa@theochem.kth.se>

	parallelize whole open shell DFT (which is really KS and LR modules).
	* dft/general.[hc]: add slave routines to the tables.
	* dft/prop-eval.c: implement data synchronization.
	* sirius/sirdiis.F: pass data in larger chunks to reduce MPI latency.
	
2003-01-09  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/rspoli.F: stop the calculation for unimplemented combination
	of flags.
	* test/{functions,dft_open_b3lyp,dft_open_lr}: DFT open shell tests.

2003-01-07  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftgrd.F: make output less verbose.
	* dft/prop-eval.c: fix error in shielding calculation introduced
	during open-shell merge.

2002-12-21  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: dxml contains lapack routines.
	* dft/fun-tester.c: unrestricted derivatives functional tester.
	* dft/integrator.c: initialize grid field.
	* pdpack/linpack.F, gp_dlapack.F: have LAPACK routines in separate file
	
2002-12-04  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/prop-eval.c: open-shell sensitive to thresholds. Make it
	more robust.
	* rsp/rspoli.F: select properly typ of integrals (ZR).
	* sirius/sirinp.F: disable QCHF for DFT.
	* dft/fun-{becke,dirac,lyp,vwn}.c, general.c, grid-gen.c:
	* integrator.c: do not require standard C on Tru64 because its C
	headers are incompliant.
	
2002-11-26  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/general.c: make density ready for nice printing (closed shell).
	* dft/prop-eval.c: ditto. Initialize derivative structure.
	
2002-11-25  Pawel Salek  <pawsa@theochem.kth.se>

	open shell LR merged.
	* dft/functionals.c: continue for closed shell and single open shell.
	* dft/general.[hc]: add open shell density evaluation from CMO.
	* dft/prop-eval.c: merge open shell LR evaluator.
	* rsp/rspoli.F: choose DFT evaluator depending on NASHT
	* sirius/sirdiis.F: merged expression for EACTIV was wrong. Correct.
	
2002-11-23  Pawel Salek  <pawsa@theochem.kth.se>

	Merge Sirius part of open-dft code. Closed shell still works.
	Open shell untested.
	* sirius/sirdiis.F: allocate memory and choose between dft evaluators.
	* sirius/sirfck.F: save more space if needed for open-shell.
	* sirius/sirgrad.F: request only exchange part of the active F matrix.

2002-11-22  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.h, general.h: expose more DftDensProp struct.
	* dft/general.c: implement restricted an unrestricted density
	evaluators.
	* dft/integrator.[hc]: generalize the integrator to handle 
	closed and open shells.
	* dft/prop-eval.c: add open shell KS matrix evaluator. 
	Use DftDensProp.
	* dft/quad-{fast,strict}.c: Use DftDensProp.
	
2002-11-21  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-{dirac,becke,example*,gga,tester,vwn}.c: unrestricted
	implementations.	
	* dft/functionals.[hc]: define and use DftDensProp.
	* dft/quad-{fast,strict}.c: adapt to changed API.
	* sirius/sirdiis.F: change CALL order to cleaner.

2002-11-05  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalton.F: declare EXEDRV as external symbol to fix serial
	gcc build.
	* abacus/linux_mem_allo.c: switch off memory allocation debugging.
	* dft/general.c: pass proper immutable string (bug introduced
	2002/11/06).
	
2002-11-05  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftgrd.F: remove grids with negative weights.

2002-11-04  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-{becke,dirac,gga,lyp,vwn,general}.c,grid-gen.c:
	* dft/integrator.c, dft/quad-fast.c, dft/prop-eval.c: 
	make the C code compile with gcc's -pedantic -ansi.
	* abacus/dalton.F, abacus/linux_mem_allo.c, eri/eri2par.F: fix
	memory allocation in 64-bit GNU-compiled parallel code.

2002-10-30  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: add missing +DA2.0W to link 64-bit version on HP/UX.
	* cc/crayio.c: make HP/UX join the AIX/DEC/IRIX/LINUX/SUN convention.
	* dft/fun-gga.c: missing stdlib.h added.
	* dft/general.c: HP/UX MPI C libraries do not define MPI_INTEGER, only 
	MPI_INT. c89-ize parallelization code.
	* dft/prop-eval.c, dft/quad-fast.c: ditto.

2002-10-28  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: use mpcc on AIX
	* remove Ids so -smp= option works on AIX.
	* dft/quad-fast.c: pass symmetry of the operators in the
	parallel version.
	* dft/fun-ggga.c: inline/C99 keyword is not supported under AIX.
	
2002-10-25  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add new derivatives to the list of tested by fun-tester
	* dft/fun-gga.c: fix wrong HF weight in B3LYP introduced in last commit
	* dft/general.c, sirius/sirinp.F: add functional shortcuts.
	
2002-10-17  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: test more functional derivatives.
	* dft/fun-{gga,lyp}.c: cleanup.
	* dft/prop-eval.c: fix error in so far unused variable transformation.

2002-10-16  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/abafsd.F: remove out-of-date comments.
	* abacus/herdrv.F: grid is not hermit issue.
	* dft/fun-vwn.c: merge open-shell generalizations (lower derivatives).
	* dft/grid-gen.h, integrator.[hc], lebedev.h: compile with
	pedantic iso C.
	* dft/prop-eval.c: more info on integration accuracy.

2002-10-15  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/rspvec.F: print spin averaged lifetimes and transition rates.

2002-10-14  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: Add grid-gen.c
	* dft/dftaux.F: init new fields in DFTCOM comon block.
	* dft/integrator.c: use new grid generator when selected.
	* dft/prop-eval.c: print relative error of charge integration
	instead of charge.
	* include/dftcom.h: add SSFPAR (SSF partiioning) and ADAPTG
	(adaptive grid generation).
	* sirius/sirinp.F: process .SSFPAR and .ADAPTG
	
2002-10-13  Pawel Salek  <pawsa@theochem.kth.se>

	Implement EDIIS solver. Improved DIIS, C2DIIS solvers (PS+IT).
	* Doc/Sirius.tex: updated doc.
	* include/infinp.h: added DIISMETHOD field.
	* pdpack/linpack.F: add DGESV from LAPACK.
	* sirius/Makefile: add opt-solvers.F
	* sirius/sirdiis.F: use new solver code.
	* sirius/sirinp.F: process new EDIIS option.

2002-10-10  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: tru64 may require -ldb for vsnprintf. Be on the safe side.
	* dft/fun-becke.c: split derivatives into subterms so crappy
	compilers do not freak out.
	* dft/integrator.c: Tru64 has only 32 file block sizes.
	* dft/test/linear-test.sh, quad-dynamic.sh, quad-dynamic-triplet.sh:
	remove bash'isms, follow strict POSIX sh syntax.
	* include/dfterg.h, dft/fun-*.c: dfterg_.wdft* removed.
	
2002-09-11  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/general.h, dft/quad-fast.c: take advantage of operators'
	symmetry to reduce computation time.
	* dft/quad-strict.c: accept symmetry parameters.
	* rsp/rspqrx3.F: pass operators' symmetry.

2002-09-02 Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalton.F, abacus/linux_mem_allo.c: make linux/gcc-64bit work.
	* dft/integrator.c: adjust block sizes to work on 32-bit and 64bit.

2002-09-01 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add Lebedev-Laikov.F
	* dft/dftdrv.F: collect DFTCOM initialization in one place.
	* dft/dftgrd.F: new angular generator ported from Dirac
	* dft/integrator.c: negative weights are legal with LL grid.
	* include/dftcom.h: update DFTCOM common block.
	* sirius/sirinp.F: read new input. (ANGINT, ANGMIN).

2002-08-19 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-fast.c: ignore blocks in MxV operations that are 0 due
	to symmetry.

2002-08-14 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftgrd.F: new radial integration scheme ported from Dirac (TS).
	* include/dftcom.h: add RADINT field to DFTCOM common block.
	* sirius/sirinp.F: replace .GRID with .RADINT

2002-08-12 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-fast.c: do not make assumptions about the symmetry of
	response vectors.
	* dft/test/quad-dynamic.sh: test more molecules with symmetry.
	

2002-07-08 Pawel Salek  <pawel.salek@kjemi.uio.no>

	* include/infinp.h: add EDIIS flag.
	* sirius/sirinp.F: process .EDIIS in input.
	* sirius/sirdiis.F: use it.
	* sirius/ediis.F: implement a global EDIIS solver (working for N<9
	error vectors though).
	
2002-07-03 Pawel Salek  <pawel.salek@kjemi.uio.no>

	* sirius/ediis.F, sirius/Makefile: add EDIIS solver.
	* sirius/sirdiis.F: Call EDIIS solver.

2002-06-28 Pawel Salek  <pawel.salek@kjemi.uio.no>

	* include/infhyp.h: add QROPRF (optical refractivity calculation).
	* rsp/hypinp.F: add .OPTREF keyword.
	* rsp/rspmai.F: initialize QROPRF
	* rsp/rspvec.F: select only freqs relevant for the OR process.
	
2002-06-18 Pawel Salek  <pawel.salek@kjemi.uio.no>

	* configure: Detect ifc and icc
	* abacus/dalton.F: memory allocation.
	* gp/Makefile: ifc support if needed.
	* gp/gphjj.F: SECOND defined for IFC.
	
2002-06-10 Pawel Salek  <pawel.salek@kjemi.uio.no>

	* abacus/herpar.F: broadcast DFTRUN and DFTADD.
	* dft/general.[ch]: add parallel molecular gradient prop. evaluators.
	* dft/integrator.c: do not send unused grid points to nodes
	(reduces overhead).
	* dft/prop-eval.c: parallelize molecular gradient.
	* include/nuclei.h: fix variable ordering: GAUNUC is LOGICAL.

2002-06-06 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-strict.c: stream-line.
	* dft/quad-fast.c: triplet QR in the MxV ("fast") implementation.

2002-06-05 Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/her1drv.F: plug in fixed molecular gradient evaluator.
	* dft/dftdrv.F, dft/dftfun.F:  CONDFT not used any more.
	* dft/fun{-gga,ctionals}.[hc]: port functional changes back from Dirac.
	* dft/general.[ch]: cleanup functional reporting.
	* dft/integrator.[ch]: fix geometry optimization in dft-qr branch.
	* dft/prop-eval.c: the evaluator.
	* include/{energy,mxcent}.h: C versions of common blocks.
	* sirius/sirinp.F: clean up DFT input processing in dft-qr branch.

2002-05-30 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/prop-eval.c: add missing infvar.h common block needed for MPI.
	
2002-05-23 Pawel Salek  <pawsa@theochem.kth.se>

	Remove the DFT energy "correction": it makes the code more natural
	and easier to understand but the dft contribution is not any
	longer computed in SIRFCK (which is bad).
	
	* dft-qr/prop-eval.c: energy correction computation not needed.
	* sirius/sirdiis.F: compute DFT contribution when needed.
	* sirius/sirfck.F: do not compute DFT KS contrbution here any more.

2002-05-07 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c (dftpot1): fix triplet transformation.
	Triplet QR with exchange-only functionals working.
	* dft/general.[hc]: extract useful get_ao_Density_from_cmo routine.
	* dft/prop-eval.c: use it.
	* dft/quad-{fast,strict}.c: triplet framework.
	* rsp/rspqrx3.F: pass spins of response vectors.

2002-05-06 Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalton.F: slaves do not always execute in the same
	environment as the master: pass LMWORK to them.
	* dft/general.c: MPI/master initialization would occasionally crash. 
	Fix.

2002-05-04 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: initialize transformed derivatives.
	* dft/quad-{fast,strict}.c: compute derivatives only when you need'em.
	* dft/test/{linear-test.sh,quadratic-test.sh}: make awk scripts
	portable.

2002-04-09 Pawel Salek  <pawsa@theochem.kth.se>

	Port to IBM SP2.
	* configure: alter the flags (-qextname is CRUCIAL), add higher C
 	optimization.
	* cc/crayio.c, cc/crayio2.F: AIX does not require a special case
 	after all.
	* dft/functionals.h: f77 preprocessor chokes on C comments. Fix.
	* dft/general.h: generalize inline function handling.
	* dft/{integrator,prop-eval,quad-fast}.c: use __inline__ for
 	inline functions.
	* gp/gpdahle.F,gp/gphjj.F: AIX does not require special cases
 	here, neither.
	* include/aovec.h: simplify slightly.
	* include/primit.h: strict C requires [A][B] declarations, not [A,B].
	* include/symmet.h: double-include protection.
	* pdpack/Makefile: eispack.F does not require preprocessing flags
 	(xlf choked on them).
	* pdpack/gp_dblas3.F: remove duplicated DSYMV, DGEMV, and DGER.
	
2002-04-08 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/general.[hc]: Add QR slave drivers to the PropEvaluatorList
	* dft/integrator.c: fix DFT integration in MO basis.
	* dft/prop-eval.c: clean up.
	* dft/quad-fast.c: parallelize QR-DFT.

2002-04-07 Pawel Salek  <pawsa@theochem.kth.se>

	* include/general.h: remove consts from dft_lin_resp() prototype.
	* dft/prop-eval.c: parallelize LR.
	
2002-04-07 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/general.[hc]: code for waking up slaves and passing info to them.
	* dft/integrator.c: parallelize (hopefully final version ever :-).
	* dft/prop-eval.c: parallelize KS part. LR part waiting.
	* dft/quad-fast.c: remove experimental code.

	* include/aovec.h, infpar.h, lmns.h, maxaqn.h, maxmom.h, mxcent.h,
	mxorb.h, nuclei.h, onecom.h, pincom.h, primit.h, shells.h,
	sphtrm.h, symmet.h, xyzpow.h: add C interfaces.
	
2002-04-06 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: Add prop-eval.c
	* dft/dft{aux,drv}.F: remove unused arguments.
	* dft/dftgrd.F: do not require disk access on slaves for grid.
	* dft/general.[ch]: add getrho(), dftgrd(), condft() declarations.

	* dft/integrator.[hc]: make it general, not QR-only. Clean grid
	interface.

	* dft/quad-{strict,fast}.c: first attempt to parallelize.
	* include/dftcom.h: add missing dftels field.
	* include/{wrkrsp,infvar}.h: add C versions.
	* rsp/rspoli.F: use generalized DFT integrator.
	* sirius/sirfck.F: ditto (keep old code around).
	
2002-04-02 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-fast.c: fix indentation.
	* dft/fun-lyp.c: optimize common sub-expressions (CSE).

2002-02-26 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftdrv.F: grid generator generates weights zero or
	negative on IEEE-conformant archs (Alpha). Take precautions.
	* dft/functionals.c: transform the derivatives in DFTDRV instead.
	* dft/integrator.c: forgotten 64-bit compatibility fixes.
	
2002-02-10 Pawel Salek  <pawsa@theochem.kth.se>

	* configure: merge FMM changes with DFT.
	* dalton.gnr: do not copy executable before execute.
	* abacus/Makefile: 
	* dft/Makefile:
	* eri/Makefile:
	* pdpack/Makefile:
	* rsp/Makefile:
	* sirius/Makefile: make "make" in subdirectory work.
	* abacus/dalton.F: reduce amount of output.
	* abacus/hergam.F: LMNVAL belongs in gp
	* gp/gptrygve.F: this is the new home of LMNVAL.
	* abacus/hergeo.F: remove reduntant line.
	* pdpack/gp_dblas3.F: add gp_dblas for those who do not have it.
	* abacus/linux_mem_allo.c: g77 compiler adds single underscore
	now, as all the other compilers.
	* dft/dftaos.F:
	* dft/dftaux.F: merge with new code.
	* dft/dftdrv.F: merge with new code.
	* dft/dftfun.F: kept for compatibilty and testing purposes.
	* dft/dftgrd.F: remove old tests.
	* dft/dftpar.F: use SETUPSOS instead of setting up common blocks
	manually.
	* include/dftbuf.h: remove unused.
	* include/dfterg.h:
	* include/dftcom.h:
	* include/inforb.h: 
	* include/priunit.h: Add C interfaces.
	* rsp/hsoprp.F:
	* rsp/expone.F: bugfixes by Olav Vahtras.
	* rsp/rspvec.F:
	* rsp/rspe2c.F: Cleanup (260 lines less and still working).
	* rsp/rspqrx3.F: Add dft support to QR.
	* rsp/rspfxd.F: Add dft support to QR (scale exchange).
	* rsp/rspmc2.F: pass CMO around.
	* rsp/rspmc3.F: ditto.
	* rsp/rspprp.F: use DDOT instead of hand coded loops.
	* sirius/sirfck.F: call DFT wrap-up.
	* sirius/sirinp.F: call new DFT input processing.
	
2002-01-29 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: fix a bug introduced yesterday in derivative
	transformation. LYP is working.

2002-01-28 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-lyp.c: found some more LYP derivatives.
	* dft/fun-tester.c: test'em all.
	* dft/functionals.[hc]: zero them and transform.

2002-01-18 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-lyp.c: Implement remaining LYP derivatives.
	* dft/fun-tester.c: make more flexible. Test remaining derivatives.
	* dft/functionals.[hc]: initialize remaining derivatives.


2002-01-14 Olav Vahtras <vahtras@theochem.kth.se>

	* dft/quad-{strict,fast}.c:
	* dft/integrator.c: make symmetry work.

2002-01-08 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-{strict,fast}.c: missing factor 2 to make GGA work.

2002-01-07 Pawel Salek  <pawsa@theochem.kth.se>

	Compute derivatives in terms of norm of the density gradient,
	Do QR in terms of the square of the density gradient.
	* dft/Makefile: add fun-example5.c
	* dft/dftdrv.F: remove reduntant variable transformation of FZ0
	* dft/fun-example.c: 
	* dft/fun-example2.c:
	* dft/fun-example3.c: derivatives computed in terms of the norm. 
	* dft/fun-example4.c: not quite convinced it works, to be checked.
	* dft/fun-tester.c: derivative test updates, not quite tested :-/
	* dft/functionals.[hc]: add Example5. Derivative transformation.
	* dft/integrator.c: proper dimensions.
	
2001-12-16 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-fast.c: add addfock field to make the code work in
	direct-integral mode (DIRFCK).	
	* dft/quad-strict.c: ditto.
	* rsp/rspqrx3.F: pass addfock parameter.
	* test-dft/quad-dynamic.sh: direct mode testing support.

2001-12-15 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: avaliable_functionals[] has last NULL element.
	* dft/integrator.c: mog is NORBT long now.
	* dft/quad-fast.c: roughly working.
	* dft/quad-strict.c: further by-the-book stuff.
	* rsp/Makefile: reorder all target and include Makefile.config.
	* rsp/rspe2c.F: simplify.
	* rsp/rspvec.F: remove 261 *code* lines without affecting the
	functionality.
	
2001-12-11 Pawel Salek  <pawsa@theochem.kth.se>

	* sirius/sirntra.F: backport hjj's bugfix for large integral files.
	
2001-12-07 Pawel Salek  <pawsa@theochem.kth.se>

	* Doc/dft/collected.tex: fix some mispellings.
	* dft/functionals.c: derivatives by the book.
	* dft/quad-strict.c: expectation values by the book.

2001-11-28 Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/hergam.F, gp/gptrygve.F: move LMNVAL to gptrygve.F where
	it belongs.
	* dft/integrator.[hc]: remove old crap, add some testing support.
	* dft/quad-fast.c: make it work for GGA as well as strict.
	* dft/quad-strict.c: declare const data constant.

2001-11-23 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-example.c, dft/fun-example4.c: updates.
	* dft/quad-strict.c: fRZZ prefactors (are they right?)
	
2001-11-21 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-strict.c: drdq derivative working properly(?).

2001-11-20 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftdrv.F: transform to q-derivatives (q=\grad^2)
	* dft/fun-example{,2,3}.c: ditto.
	* dft/quad-strict.c: drdq derivative working properly.
	
2001-11-20 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-example3.c: working in new q-derivative scheme.
	* dft/quad-strict.c: fixes for dynamic drdq derivative (mostly working)

2001-11-19 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-example2.c: test for drdq derivative.
	* dft/fun-example3.c: new derivatives scheme.
	* dft/integrator.c: inline when possible.
	* dft/quad-strict.c: new derivatives scheme.

2001-11-15 Pawel Salek  <pawsa@theochem.kth.se>

	Take a snapshot before trying new derivative scheme.

2001-11-11 Pawel Salek  <pawsa@theochem.kth.se>

	* configure: be pedantic with g77.

2001-11-07 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/{Makefile,functionals.[hc],fun-example.c}: add yet another GGA f.
	
2001-11-07 Pawel Salek  <pawsa@theochem.kth.se>

	* sirius/sirinp.F: some further DFT input rearrangement.
	* dft/fun-example2.c: remove alpha-beta coupling for easier testing.

2001-11-06 Pawel Salek  <pawsa@theochem.kth.se>

	Example working only now.
	* dft/fun-example3.c: make the GGA contribution bigger so errors 
	are easier to spot.
	* dft/functionals.c (dftpot2_): fix derivative factors.
	* dft/quad-strict.c: missing division spotted. Uff.

	* sirius/sirinp.F: list available functionals on error.

2001-11-01 Pawel Salek  <pawsa@theochem.kth.se>

	Example - mixed functional of first order working.
	* dft/Makefile: add new tests.
	* dft/fun-becke.c: add few new comments. Becke _is_ a GGA functional.
	* dft/fun-example.c: tested and working.
	* dft/functionals.c: fix the functional transformation factors.
	* test-dft/quad-dynamic.sh: update for new keywords. add CO.

2001-10-31 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-example[23].c: add two new functionals.
	* dft/functionals.[hc], dft/Makefile: add them to the list.
	
2001-10-31 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-strict.c: make H2 GGA work for every basis set :-).
	* test-dft/{linear-test,quad-dynamic}.sh: adapt to new input.

	* dft/functionals.c: the temporary derivative translation code :-/.
	* dft/quad-strict.c: _working_ Example GGA (one-liner, but ugly).
	
2001-10-31 Pawel Salek  <pawsa@theochem.kth.se>

	solve f77->portland compatibility problems.
	* configure: add -fno-second-underscore to g77 option list.
	* dft/functionals.c: dft_isgaa_()
	* dft/integrator.c: fort_wrt_()

	* sirius/sirinp.F: remove incompatible dft input processing.

2001-10-30 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/fun-dirac.c: Fix bug in dirac functional.

2001-10-30 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: Add fun-example.c
	* dft/functionals.[hc]: add ExampleFunctional to the list.
	* dft/{dftaux.F,dftfun.F}: put 1/RHOGRD fZ0 prefactor where it belongs.
	* dft/dftdrv.F: use DFT_ISGGA()
	* dft/fun-becke.c: cleanup.
	* dft/fun-dirac.c, dft/fun-vwn.c: cleanup.
	* dft/fun-gga.c: ditto. add GGAKey.
	* dft/fun-tester.c: testing.
	* dft/integrator.c: use dft_isgga().
	* dft/quad-strict.c: work in progress.
	* sirius/sirinp.F: do not mix dft with Sirius.

2001-10-22 Pawel Salek  <pawsa@theochem.kth.se>

	Deprecates some more messy Fortran code (hm, is mine better?).
	* dft/dft-qetest.F: add missing dftcom.h and memory allocation.
	* dft/dftaux.F: make clear difference between different kinds of derivatives.
	* dft/dftdrv.F, dft/dftfun.F: ditto.
	* dft/fun-becke.c: the same.
	* dft/fun-dirac.c: same; add missing rho in TEST_FUNCTIONAL==2 code.
	* dft/fun-gga.c,fun-lyp.c, fun-vwn.c: same
	* dft/functionals.[hc]: same. Derivative transformation support.
	* dft/general.h: Same.
	* dft/quad-{fast,strict}.c: ditto.
	* dft/fun-tester.c: more consistency tests.
	
2001-10-22 Pawel Salek  <pawsa@theochem.kth.se>

	Test quadratic rho-dependent QR DFT.
	* dft/Makefile: add quadratic files back.
	* dft/dftdrv.F: remove derivative transformation which does not belong.
	* dft/dftfun.F: add F1000 for completness.
	* dft/fun-becke.c: add compatibility common block setup.
	* dft/fun-dirac.c: use temporary var rho=rhoa+rhob.
	* dft/fun-gga.c: make testing possible (not clean way :-/)
	* dft/fun-vwn.c: implement almost everything (triplet missing).
	* dft/fun-tester.c: test LYP
	* dft/functionals.c: tested dftpot1()
	* dft/{functionals,general}.h: dftpot[12] moved from general.h
	* dft/integrator.c: use dftpot2().
	* rsp/rspqrx3.F: enable QR DFT back.
	* test-dft/quad-dynamic.sh: new input format.
	
2001-10-18 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: make the test work again after the code changes.
	* dft/dftaux.F: remove redundant variables, fix misspellings.
	* dft/dftdrv.F: use new DFTLTR API.
	* dft/dftfun.F: pass the weight to DFTPOT1. Add test routines.
	* dft/fun-gga.c: add testing support.
	* dft/fun-tester.c: make sure it works with current code. Test VWN.
	* dft/fun-vwn.c: implement everything.
	* dft/functionals.c: general functional related functions.
	* dft/functionals.h: add available_functionals
	* dft/general.c: cleanup.
	* sirius/sirinp.F: remove old DFTFUNCTIONAL
	* test-dft/linear-test.sh: adapt to new input style.

2001-10-15 Pawel Salek  <pawsa@theochem.kth.se>

	SIMPLIFIED_FUNCTIONALS:
	* rsp/rspqrx3.F: disable quadratic dft for a moment.
	* sirius/sirinp.F: use new DFT configuration reading code.
	* include/dftcom.h: dftyp is char[6], not real.
	* dft/fun-*.c: functionals reimplemented.
	* dft/*.[hc]: other files adapted.

2001-10-12 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/*: order things a bit, add Fortran interface to derivatives.

2001-10-03 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: implement 3-order LYP derivatives(+tests).

2001-10-03 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: implement 2-order LYP derivatives.
	
2001-10-03 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add debugging to test program.
	* dft/dftaux.F: FORT_WRT defined.
	* dft/dftqua.F: remove dead code.
	* dft/functionals.c: implement LYP energy and first derivatives.
	* dft/integrator.[hc]: add routines to print to LUPRI from C.
	* dft/quad-fast.c, quad-strict.c: use new IO API.
	
2001-10-02 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/integrator.c, dft/quadra-strict.c: make comments ANSI-C compliant

2001-09-21 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/quad-strict.c: make QR DFT work for H2 and GGA.
	Now, just to get it running for other molecules.
	
2001-09-20 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/integrator.c: fix double-free.

2001-09-19 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/resp-quadra.[hc]: scratched.
	* dft/integrator.[hc]: general DFT integrator implemented.
	* dft/quad-fast.c: fast implementation of DFT QR. No GGA yet.
	* dft/quad-strict.c: strict implementation (one GGA problem fixed).

2001-09-19 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: carefully add gcc-specific options to CFLAGS
	* dft/dftaux.F: use KSO0 consistently.
	* dft/dftfun.F: support for testing GGA functionals.
	* dft/functionals.c: same.
	* dft/resp-quadra.c: GGA implemented for STRICT_FORMULAS. 
	Does not work. Yet.
	
2001-09-04 Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.in: reduce number of .PHONY targets.
	* configure: do not modify the main makefile, it's redundant.
	* abacus/dalton.F: remove redundant output.
	* dft/dftaos.F: use Occham's razor: replace NOSYM with NSYM.EQ.1
	* dft/dftaux.F: same. Initialize variables.
	* dft/dftqua.F: remove NOSYM.
	* dft/functionals.c: rewrite v2bck a bit to make assembling multiple
	contributions to the functional easier.
	* dft/resp-quadra.[hc]: initial GGA support. Not working yet. Some 
	missing factors are most likely missing.
	* include/dfterg.h: add more comments.
	* include/dftinf.h: same.
	* sirius/sirgrad.F: MPAB -> DGEMM
	* sirius/sirinp.F: implement super-flexible DFTFUNCTIONAL
	* test-dft/linear-test.sh: thorough and cleaner.
	
2001-08-27 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F:
	* dft/dftdrv.F: returning to the old EXCMAT symmetrization code.
	While the RHO-dependent code has been reduced to canonical
	BLAS-compatible SYmmetric matrix code, this cannot be said about GGA.
	
2001-08-27 Pawel Salek  <pawsa@theochem.kth.se>

	* sirius/sirfck.F: use cleaned-up interface to DFT.
	* sirius/sirinp.F: initialize DFTRUN 
	* dft/dftaux.F: take advantage of sparse GAO whenever possible.
	* dft/dftdrv.F: create clean interface for calculation of
	exachange/correlation contribution to KS matrix.

2001-08-21 Pawel Salek  <pawsa@theochem.kth.se>

	* configure: fix one comparison.
	* dalton.gnr: do not copy the excutable.

2001-08-17 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F: revoke change of 2001-08-06: second derivative IS used.
	
2001-08-08 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: third order derivatives of Becke exchange
	functional implemented, together with a comprehensive set of
	tests.
	* dft/dftfun.c (v1bck): do not divide by GRHO==0.
	* dft/Makefile: functionals derivative test target added.
	* dft/resp-quadra.h: added missing third order derivatives.
	* configure: recognize ATLAS; generate Makefile apriopriate
	for LinuxAlpha+gcc
	
2001-08-06 Pawel Salek  <pawsa@theochem.kth.se>

	* dft/functionals.c: added.
	* dft/Makefile: add functionals.c
	* dft/dftaux.F: remove redundant call to v1drc - results were ignored.
	* dft/resp-quadra.c: remove one temporary vector. remove IO bug
	that surfaced on 64-bit alpha (but existed all the time).
	* dft/resp-quadra.h: declare the derivative info structure.

2001-07-30  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/Makefile: remove libabacus.a in clean target.
	* dft/Makefile: remove libdft.a in clean target.
	* dft/dftqua.F: add printdftinf to dump DFTINF common. Change location
	of multiplication factors to mimic taking matrix traces.
	* dft/resp-quadra.c: major update to working dynamic DFT quadratic
	response at LDA level.
	* dft/resp-quadra.h: add some more BLAS routine prototypes.
	* eri/Makefile: remove liberi.a on clean.
	* include/dftcom.h: fix minor mispelling.
	* rsp/Makefile: remove librsp.a on clean.
	* rsp/rspqrx3.F: remove debugging output.
	* sirius/Makefile: remove libsirius.a on clean.
	* test-dft/quad-static.sh: improved test for testing static response.
	* test-dft/quad-dynamic.sh: add some extra molecules.

	
2001-07-27  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/linux_mem_allo.c: remove debuggin output.
	* sirius/sirinp.F: same.
	* test-dft/quadratic-test.sh: make sure it works reliably.

2001-07-23  Pawel Salek  <pawsa@theochem.kth.se>

	* configure, Makefile: use LDFLAGS for linking.
	* dft/dft-mk2.tex: remove mispellings.
	* olav/makefile.in: do not require that dalton is on the path.
	* olav/qrtest: do not assume everybody uses (ba)sh.
	* rsp/rspoit.F: start using BLAS routines for MM multiplication.
	* rsp/rspprp.F: clean up the code.

2001-07-20  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: use dependencies.
	* include/priunit.h: C- version of the common.
	* sirius/sirinp.F: add missing dftinf common block.
	* test-dft/quadratic-test.sh: run non-direct only.

2001-06-14  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/aba2tex.F: fix bug in the temporary vector allocation.
	This bug is not present in current official CVS repository,
	as far as I can tell.
	
2001-05-22  Pawel Salek  <pawsa@theochem.kth.se>

	* eri/eri2par.F: declare ISTAT as an array.
	* abacus/dalton.F: new memory allocation code tested with MPI.

2001-03-22  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add dft-qetest.o to the target list. It is really
	a test file but the fortran code has no support for conditional
	optimization, so the file must be included in the list, no matter
	if you want the test build or not.

2001-03-22  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaux.F: swap wrong loop limits => fix LDA used with London
	orbitals. (patch from Trygve <t.u.helgaker@kjemi.uio.no>).
	* rsp/rspoit.F: make .NODOIT option work 
	(patch from Kenneth Ruud <ruud@chem.uit.no>).
	* dft/dft-qetest.F: don't tread rho==0 as a critical error.

2001-03-14  Olav Vahtras <vahtras@pdc.kth.se>
        *  dft/dft-qetest.F : QETEST - testing DFT contribution in quadratic
        *  response

2001-03-14  Olav Vahtras <vahtras@pdc.kth.se>
        *  rsp/rspvec.F : call in QRHYP to QETEST - testing DFT contribution
        *  in quadratic response

2001-03-14  Olav Vahtras <vahtras@pdc.kth.se>
        *  rsp/rspfxd.F : wrong use of memget fixed

2001-03-12  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/rspqrx3.F: disable DFT contribution in call to QFOCK. We
	prefer to have all the DFT contribution computed in one single
	place, in one single way, no matter what the integral computation
	method is chosen.
	
2001-02-28  Olav Vahtras <vahtras@pdc.kth.se>
        *  abacus/dalton.F : memory allocation for Linux PGI gone. Fixed.

2001-02-28  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaos.F: line with SDPRE expanded to DFLOAT exceeds 72 chars.
	* dft/dftqua.F: workaround for numerically instable grid generator.
	Compiling on alpha with -O generates a weight=0
	* include/sdpre.h: define what and when you can define.
	
2001-02-27  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaos.F: define DFTINF common block setup routine SETUPSOS.
	* dft/dftaux.F: fix unitialized variables second time.
	* dft/dftdrv.F: use SETUPSOS.
	* dft/dftqua.F: come back to symmetrized form of the contribution
	that is verified to work for static case only, since the dynamic
	formulas have not been verified yet. Use new GETSOS routine.
	* include/dftcom.h: add DFTHRS (is it needed?)
	
2001-02-27  Olav Vahtras <vahtras@pdc.kth.se>
        * rsp/expone.F
        Previously PRPGET returned ANTSYM=-1 for imaginary operators
        which implied zero expectation value. This has changed to
        reflect the symmetry of the gradient vector, and the corresponding
        change has to be made in AVEPRP

2001-02-22  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/abadrv.F: warning not needed for DFT.
	* abacus/abafsd.F: update API.
	* abacus/her1drv.F: update API.
	* abacus/abatro.F: check coordinates.
	* dft/dftaos.F: declare DOGGA
	* dft/dftden.F:
	* dft/dftdrv.F:
	* dft/dftgrd.F: dft updates, grid generation, symmetry support.
	* rsp/rspoli.F: update API for symmetry.
	* sirius/sirfck.F: update for symmetry.
	* sirius/sirtr1.F, sirius/sirgrad.F: more informative error messages.
	* sirius/sirinp.F: more intuitive grid input.
	* dft/dftaux.F, dft/dftest.F, include/dftinf.h: added.
	* include/dftcom.h: updated.
	* dft/dftqua.F: adapt to changed API of GETAOS.
	
2001-02-22  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftfun.F: make the functional testing easier: define
	TEST_FUNCTIONAL to convert LDA TO a polynomial functional.
	* abacus/dalton.F:
	* abacus/linux_mem_allo.c: allocate memory properly on 64-bit machines.
	
2001-02-09  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/herdirect.F: remove dependency on DFT.
	* sirius/sirfck.F: move adding the DFT contribution so it gets added
	in one place in both 2-el direct and disk-stored integral modes.

2001-02-07  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/rspfxd.F, rsp/rspqrx3.F: move adding the DFT contribution
	to a more apriopriate place, so it gets added both for direct
	and stored 2-el integrals. FIXME: QFOCK and RSPFXD do not generate
	the same matrices when called in DFT mode.
	
2001-02-02  Pawel Salek  <pawsa@theochem.kth.se>

	* test-dft/quad-perm.sh: added for testing quadratic response 
	symmetry properties.

2001-01-31  Pawel Salek  <pawsa@theochem.kth.se>
	
	* test-dft/quadratic-test.sh: add option to test .direct calculations.
	
2001-01-30  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftqua.F (DFQUM): do some optimizations to avoid computing
	certain terms over and over again. Collect contributions from
	different orders to single DAXPY operation.

2001-01-29  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftqua.F: LDA works. 

2001-01-29  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftqua.F: Dirac exchange works! Now, only VWN is missing 
	in LDA.
	* test-dft/quadratic-test.sh: minor improvements.

2001-01-23  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftqua.F (DFQUM): implemented the calculation in MO basis,
	which gives indentical DFT contribution matrix as int-test.pl
	* test-dft/int-test.pl: DFT integration test program for HeH+.
	
2001-01-18  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: improve library detection.
	* pdpack/Makefile: make exceptional compilation with lower
	optimization for broken compilers.
	* sirius/Makefile: don't create it, just replace needed module.
	* eri/Makefile: make a library out of it.

2001-01-17  Pawel Salek  <pawsa@theochem.kth.se>

	* test-dft/linear-test.sh:    adding tools for testing response
	* test-dft/quadratic-test.sh: with finite field.
	
2001-01-11  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/Makefile: replace only modified files in the library.
	* rsp/rspvec.F: updates from Kenneth.

2001-01-10  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/Makefile: add checking for unused and uninitialized variables.
	* dft/dftaos.F: initialize FZ?LYP variables.
	* dft/dftdrv.F: initialize EXCTRO, DOGRHO and DOLRHO
	* dft/dftfun.F: removed unused variables.
	* dft/dftgrd.F: same.
	
2001-01-09  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.in: ordered libraries so linux target compiles at once.
	* abacus/Makefile: add missing file
	* gp/Makefile: make a library out of it.
	* pdpack/gp_dblas3.F: added dgemv and dsymv routines.
	* configure: add s to ARFLAGS (equivalent to ranlib) in generated
	Makefile.config. Update	target (linux.x, linux_cc.x) guessing.
	
2001-01-08  Pawel Salek  <pawsa@theochem.kth.se>

	* configure: update library recognition part for alpha-linux.
	* pdpack/Makefile: make a decent library out of it.
	* rsp/Makefile: same.
	* Makefile.in: use the libraries instead of single files.
	* rsp/expone.F: ANTSYM is smaller that 0 for antysymmetric properties,
	not larger.
	* abacus/abarhs.F: LENGTH->NINT
	
2000-12-07  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/hergeo.F: remove line that did nothing but generated warning
	* dft/dftqua.F: changed after finding error(?) in the formula.
	* sirius/sirinp.F: fixed error in output description.
	
2000-12-07  Pawel Salek  <pawsa@theochem.kth.se>

	* abacus/dalton.F: remove getenv() Cray dependences.
	* {abacus,dft,pdpack,sirius}/Makefile: reorganize makefiles to a
	library fashion.
	* rsp/rspfxd.F: use HFXFAC to weight exchange contribution in
	E^[3] handler.
	* rsp/rspqrx3.F: fix indentation.
	
2000-12-06  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftdrv.F: MPAB->DGEMM replacement suggestion. Not tested.
	* dft/dftqua.F: get the prefactors right(?). Some '-' signs were
	missing. The "true"formula has nice cancellation property.
	Imported legacy comments updated.
	* rsp/rspmc2.F: pass CMO to MELTWO and 
	* rsp/rspmc3.F (MELTWO): accept CMO and pass it to DFTQUD
	* rsp/rspqrx3.F: pass CMO to RSPFXD.
	* rsp/rspfxd.F: call DFTQUD when DFTADD is set.
	
2000-12-05  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.in, dft/Makefile: remove dft-specific info from global
	Makefile to keep things in order.
	* configure: rename Makefile.basis to semi-standard Makefile.in
	* rsp/rspfxd.F: add DFT contribution to E^[3] N_a N_b.
	* dft/dftaos.F,dft/dftdrv.F: rename GETAOS->DFGAOS - name space
	collision with AMFI.

	
2000-11-27  Pawel Salek  <pawsa@theochem.kth.se>

	* rsp/rspoli.F: fix for direct response calculations from
	Trygve Helgaker <t.u.helgaker@kjemi.uio.no>
	
2000-11-23  Pawel Salek  <pawsa@theochem.kth.se>

	* dft/dftaos.F: use DAXPY and DGEMV to get some extra performance
	in DFTLTR(). The avg. vector length is only NBAST/2, but..

2000-11-21  Pawel Salek  <pawsa@theochem.kth.se>

	* Makefile.basis: clean up make clean target.
	* configure: add support to linux-alpha architecture
	* include/ibtfun.h: use HAVE_GCPP define to get rid of warnings.


