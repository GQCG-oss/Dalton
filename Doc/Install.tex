\chapter{Installation}\label{ch:install}

\section{Hardware/software
supported}\label{sec:hardsoft}\index{Hardware/software support|textbf}

          \siraba\ can be run on a variety of systems running the UNIX
operating system.  The current
release of the program supports
Convex\index{Convex}, Cray-UNICOS\index{Cray},
Cray-T3D/E\index{Cray-T3D}\index{Cray-T3E}\index{Cray},
IBM-AIX\index{IBM-AIX}, Intel Paragon\index{Intel Paragon},
SGI-IRIX\index{SGI}\index{SGI-IRIX}, SUN\index{Sun},
Linux\index{Linux} running GNU-f77 and partially also
DEC-Alpha\index{DEC-Alpha}\footnote{The limitations imposed in the
DEC-Alpha installation is the sorting of differentiated two-electron
density matrices. The practical consequences of this is that the
calculation of magnetizabilities\index{magnetizability} and molecular
Hessians\index{Hessian} cannot be done
using MCSCF\index{MCSCF} wave functions on DEC-Alphas.}. We
furthermore note that
response calculations involving the spin--orbit\index{spin-orbit}
operator only will  work on Convex, IBM-AIX and SUN computers.

          The program is written entirely in
FORTRAN~77\index{FORTRAN~77}, with
machine dependencies isolated using C preprocessor directives\index{C
preprocessor}.  All floating-point computations are
performed in 64-bit precision, but if 32-bit integers are
available the code will take advantage of this to reduce storage
requirements in some sections.

          The program should be easily portable to other UNIX
platforms\index{porting}: indeed, the Convex, or
IBM-AIX versions
may very well work without change on typical 32-bit UNIX workstations.
Users who port the codes to other platforms are encouraged to
communicate any required changes in the original source with the
appropriate C preprocessor directives to the authors.

\section{Source files}\label{sec:source}

          \siraba\ is distributed as a \verb|tar| file obtainable from
the \siraba\ homepage\\
(\verb|http://www.kjemi.uio.no/software/dalton/dalton.html|) if the license
agreement for the program has been completed and returned to the
authors.  If you
have accessed this documentation off the \verb|tar|\index{tar-file}
file you will
already know how to extract the required directory structure, but
for completeness, assuming the \verb|tar| file is called
\verb|dalton.tar|\index{tar-file}, the command
\begin{verbatim}
tar xf dalton.tar
\end{verbatim}
will produce the following subdirectory structure in the current
directory:
\begin{verbatim}
dalton/Doc              dalton/basis      dalton/pdpack     dalton/tools
dalton/Makefile         dalton/eri        dalton/rsp
dalton/configure        dalton/gp         dalton/sirius
dalton/abacus           dalton/include    dalton/test
\end{verbatim}
These files and directories contain, respectively, the Makefile for
the program, a shell script which will build a suitable
Makefile.config for use when installing the program, the
source  code for the different sections constituting the program
(abacus, gp, rsp, sirius, and eri), a directory containing
various public domain routines (pdpack), the necessary include files
containing common blocks and
machine dependent routines, a directory containing all the basis sets
supplied with this distribution, a set of test jobs with corresponding
output files, a directory containing some useful pre- and
post-processing programs supplied to us from various users, and
finally this documentation.

\section{Installing the program using the Makefile}\label{sec:Makefile}\index{Makefile}

The program is easily installed through the use of the supplied
\verb|configure| script\index{configure script}. Based on the
architecture supplied by the user, the
script will try to build a suitable
\verb|Makefile.config|\index{Makefile.config} on the
basis of what kind of mathematical libraries are found, and user
input. Thus, to execute the script, type

\begin{verbatim}
> ./configure -hosttype
\end{verbatim}
where hosttype may be one of

\bigskip

\begin{tabular}{ll}
aix\hspace{6cm} &  sgi\\
paragon &  cray\\
cray-t3d &  cray-t3e\\
 convex &  sun\\
 dec-alpha\\
\end{tabular}

\bigskip

Although this script in most cases is capable of making a correct
\verb|Makefile.config|, we always recommend users to check the created
\verb|Makefile.config| against local system set-up. This applies in
particular in case of parallel installations.

During the executation of the \verb|configure| script, you will be
asked a few questions, most of which require a quite obvious
answer. Let us only comment upon four of the questions asked:

\begin{enumerate}
\item Scratch memory\index{scratch memory} size: Dalton uses
approximetely 0.8 Mwords (6.5 Mbytes)
in static memory allocations. The program defines a large scratch-memory
array, from which it allocates space for temporary arrays
during the execution of the program. This value is given in Words, and
should be chosen according to available memory on your computer.
\verb|WRKMEM| may be changed at execution time by supplying a
different value for \verb|WRKMEM| through the shell-script running
\siraba .

\item Default basis set library\index{basis set library} location:
This defines the directory where the program will look for the
basis sets supplied with the distribution, and this need to be
changed according to the local directory structure. We recommend
that the basis sets in this directory are {\em not} changed, but
that changes to the basis set rather is done in a separate
directory, and then supply this basis set directory to the program
at execution time.

{\sc NOTE TO SYSTEM-ADMINISTRATORS:} Supplied with \siraba\ is an
extensive basis set library. This basis set directory must be made
readable to all users. {\sc END NOTE}

\item Default scratch space\index{scratch space}: Determines the
default head scratch
directory where temporary files will be placed. This value will be put
in the \verb|dalton| run-script. However, note that jobs will be run in
a subdirectory of this head scratch-directory, according to the name
of the job files. If \verb|/work| or \verb|/scratch| is defined in the
local directory structure, the script will normally suggest
\verb|/work/$USER| or  \verb|/scratch/$USER| as default head scratch space.

\item Default install directory\index{install directory}: Denotes the directory where the \siraba\
executable and the \verb|dalton| run script will be moved to.
\end{enumerate}

Compilator options will be supplied in \verb|Makefile.config|, in the manner
we use ourselves. {\em These options often do not include aggressive
optimization\index{optimization (f77)} (for instance on the Cray), as
it is our experience that
the code is optimized incorrectly if the optimization is too
aggressive.} The proper options to the C preprocessor for an ordinary
installation of the program are also supplied with \verb|Makefile.config|\index{Makefile.config}.

NOTE 1: If problems with I/O\index{I/O-problems} are experienced on
any computer,
manifesting themselves as error messages saying that a read statement
has passed the EOF mark, the *.F files in the gp directories should be
touched, and the code rebuilt using the additional C preprocessor
directive \verb|VAR_MFDS|.

When  \verb|Makefile.config|\index{Makefile.config} has been properly
created and checked
to agree with local system set-up, all that is needed
to build an executable\index{building an executable} version of the
code is to type
(in the same directory as the \verb|Makefile.config| file):
\begin{verbatim}
> make
\end{verbatim}
Note to users who want to install a parallel program\index{parallel
program} employing PVM3\index{PVM}
as message passing interface: Whereas a normal installation will
create a single executable, the PVM installation will
create both a master\index{master program} and a slave
program\index{slave program}.
The slave program, called \verb|node.x|\index{node.x}, must be placed in  the
proper directory, as defined by the PVM3 installation on the
platform you are using. NOTE: Default location of the slave program
will be the same directory as the master program, that is, the default
installation directory.

All parallel executables will be called \verb|dalpar.x|, whereas a
single-processor executable will be called \verb|dalton.x|.
