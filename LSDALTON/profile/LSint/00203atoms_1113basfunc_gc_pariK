#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > 00203atoms_1113basfunc_gc_pariK.info <<'%EOF%'
   00203atoms_1113basfunc_gc_pariK
   -------------
   Molecule:         alanine chain/3-21G
   Wave Function:    HF
   Profile:          PARI Exchange Matrix
   CPU Time:         7 min 40 seconds
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > 00203atoms_1113basfunc_gc_pariK.mol <<'%EOF%'
BASIS
3-21G Aux=Ahlrichs-Coulomb-Fit
==================================
==================================
Atomtypes=4 Nosymmetry Angstrom
Charge=1.0 Atoms=102
H     0.05280000   -1.53439999    0.88129997
H    -1.23450005    0.27579999   -0.89679998
H    -0.19740000    2.36640000   -0.29170001
H    -1.35080004    1.76890004    0.92479998
H     0.39960000    1.62769997    1.21329999
H    -0.67930001   -0.36179999    1.70280004
H     1.93879998   -0.20299999    0.86240000
H     3.77309990    0.31909999   -1.13689995
H     5.30579996   -1.03629994    0.13810000
H     4.34819984    0.08210000    1.13769996
H     3.94610000   -1.65120006    1.10769999
H     2.31520009   -2.89580011   -0.17090000
H     3.48040009   -4.61149979   -1.99660003
H     1.58280003   -6.04829979   -1.61339998
H     2.24510002   -5.33610010   -0.12310000
H     0.73299998   -4.70330000   -0.81599998
H     0.30090001   -2.81949997   -2.26799989
H    -0.56389999   -3.58800006   -4.77720022
H    -1.85609996   -1.55270004   -4.77769995
H    -1.90950000   -2.42610002   -3.22799993
H    -0.91280001   -0.96060002   -3.38960004
H     1.44050002   -0.66700000   -3.85820007
H     1.89639997    0.49820000   -6.32170010
H     3.84010005    1.50049996   -5.30719995
H     2.39650011    1.54219997   -4.26730013
H     3.69799995    0.37430000   -3.93650007
H     3.95830011   -1.95000005   -4.54740000
H     6.02029991   -2.35270000   -6.34200001
H     6.32000017   -4.49100018   -5.26959991
H     6.03840017   -3.15730000   -4.12550020
H     4.73320007   -4.31269979   -4.48400021
H     2.88000011   -4.20650005   -6.03259993
H     3.10579991   -6.03970003   -8.08769989
H     0.69720000   -6.13689995   -8.04889965
H     1.43280005   -6.13299990   -6.42840004
H     0.65950000   -4.65899992   -7.05810022
H     1.57760000   -2.71510005   -8.16339970
H     0.78670001   -2.52110004  -10.80370045
H     0.89150000   -0.13300000  -10.49100018
H     0.13860001   -0.99419999   -9.12769985
H     1.80120003   -0.37660000   -8.98099995
H     3.94339991   -1.45309997   -9.29090023
H     5.31500006   -0.47940001  -11.48299980
H     7.32130003   -0.93000001  -10.22459984
H     6.02899981   -0.18380000   -9.25500011
H     6.37779999   -1.92069995   -9.08640003
H     5.35580015   -3.86549997  -10.09490013
H     7.05000019   -5.16909981  -11.84560013
H     5.93260002   -7.19399977  -11.16460037
H     6.30189991   -6.09859991   -9.81149960
H     4.63649988   -6.22329998  -10.42630005
H     3.40610003   -4.86899996  -12.00599957
H     2.83419991   -6.22139978  -14.34659958
H     0.81790000   -4.90220022  -14.42599964
H     1.19330001   -5.52629995  -12.80220032
H     1.48819995   -3.81410003  -13.18750000
H     3.48889995   -2.65039992  -13.88529968
H     3.32170010   -1.70969999  -16.47789955
H     4.71770000    0.11030000  -15.73579979
H     3.42950010   -0.31099999  -14.58250046
H     5.10939980   -0.80059999  -14.25800037
H     6.28140020   -2.87479997  -14.66769981
H     8.25039959   -2.62140012  -16.58939934
H     9.45009995   -4.30620003  -15.35070038
H     8.68970013   -3.07310009  -14.31700039
H     7.96479988   -4.69299984  -14.44989967
H     6.17159986   -5.53719997  -15.83399963
H     7.05030012   -7.35629988  -17.71899986
H     4.90070009   -8.41689968  -17.46120071
H     5.63450003   -7.91769981  -15.91860008
H     4.29640007   -6.97289991  -16.61450005
H     4.28369999   -4.97399998  -17.97389984
H     3.37619996   -5.44070005  -20.54159927
H     2.49799991   -3.19679999  -20.46549988
H     2.22429991   -4.11639977  -18.96669960
H     3.48799992   -2.86459994  -19.02449989
H     5.86880016   -3.00819993  -19.41740036
H     6.62500000   -1.83650005  -21.80270004
H     8.68799973   -1.27750003  -20.68740082
H     7.24350023   -1.00779998  -19.68339920
H     8.28520012   -2.41919994  -19.38299942
H     8.11730003   -4.71820021  -20.11079979
H    10.12570000   -5.42479992  -21.87199974
H     9.97319984   -7.62949991  -20.90850067
H     9.91199970   -6.32270002  -19.70199966
H     8.42319965   -7.18629980  -20.15460014
H     6.67990017   -6.65100002  -21.74139977
H     6.62260008   -8.39309978  -23.88529968
H     4.24009991   -8.02579975  -23.91230011
H     4.90570021   -8.24120045  -22.27599907
H     4.45109987   -6.61740017  -22.84510040
H     5.76219988   -4.83650017  -23.82130051
H     5.11569977   -4.36789989  -26.46649933
H     5.66440010   -2.06240010  -26.02379990
H     4.71350002   -2.82629991  -24.72789955
H     6.45739985   -2.54870009  -24.50659943
H     8.36359978   -4.00199986  -24.81979942
H     9.97189999   -3.20749998  -26.92140007
H    11.80970001   -4.09600019  -25.63890076
H    10.65089989   -3.16170001  -24.66360092
H    10.65489960   -4.93940020  -24.57950020
H    11.19550037   -6.31330013  -28.38739967
Charge=6.0 Atoms=60
C    -0.38240001    0.22050001   -0.21940000
C     0.93320000   -0.08650000   -0.95240003
C    -0.38280001    1.59440005    0.45510000
C     3.35980010   -0.57099998   -0.66259998
C     3.28279996   -1.76810002   -1.62360001
C     4.30800009   -0.81140000    0.51470000
C     2.51250005   -4.12300014   -1.88419998
C     1.85270000   -3.80629992   -3.23580003
C     1.71089995   -5.12449980   -1.04929996
C    -0.08840000   -2.70729995   -4.34549999
C     0.83160001   -1.98640001   -5.34380007
C    -1.27690005   -1.85020006   -3.90350008
C     2.46320009   -0.12549999   -5.63059998
C     3.45880008   -1.04809999   -6.35169983
C     3.14860010    0.89609998   -4.72009993
C     5.11439991   -2.88579988   -6.05340004
C     4.50600004   -3.68499994   -7.21680021
C     5.58529997   -3.77550006   -4.90049982
C     2.58130002   -5.09740019   -7.92939997
C     2.41199994   -4.29269981   -9.22789955
C     1.24699998   -5.53819990   -7.32270002
C     1.61249995   -2.14310002  -10.20100021
C     2.90630007   -1.97660005  -11.01389980
C     1.07219994   -0.81660002   -9.66149998
C     5.32600021   -1.39559996  -10.89260006
C     5.71099997   -2.62820005  -11.72620010
C     6.33589983   -1.08529997   -9.78530025
C     5.97219992   -5.10570002  -11.69559956
C     5.18590021   -5.25099993  -13.00829983
C     5.69059992   -6.23649979  -10.70339966
C     2.92070007   -5.17819977  -14.04300022
C     3.41910005   -4.27339983  -15.18109989
C     1.50339997   -4.83020020  -13.58160019
C     4.12330008   -1.96070004  -15.78320026
C     5.38070011   -2.48020005  -16.49830055
C     4.36210012   -0.64620000  -15.03629971
C     7.65819979   -3.43680000  -16.17399979
C     7.38730001   -4.54920006  -17.19939995
C     8.50109959   -3.91129994  -14.98779964
C     6.19029999   -6.69630003  -17.60499954
C     5.65100002   -6.19409990  -18.95380020
C     5.18330002   -7.56309986  -16.84539986
C     3.99600005   -4.68979979  -20.05159950
C     5.07110023   -4.11299992  -20.98629951
C     2.97860003   -3.64170003  -19.59429932
C     7.03760004   -2.59010005  -21.13190079
C     7.86289978   -3.65190005  -21.87619972
C     7.87349987   -1.76440001  -20.15110016
C     9.12500000   -5.78639984  -21.63529968
C     8.41609955   -6.39690018  -22.85470009
C     9.37639999   -6.80420017  -20.52009964
C     6.28280020   -7.37599993  -23.69000053
C     6.31610012   -6.49270010  -24.94750023
C     4.86850023   -7.57969999  -23.14150047
C     5.97700024   -4.18529987  -25.82390022
C     7.30639982   -4.23280001  -26.59390068
C     5.68190002   -2.80679989  -25.22780037
C     9.78680038   -4.13570023  -26.38089943
C     9.95790005   -5.37820005  -27.26930046
C    10.79810047   -4.07919979  -25.23340034
Charge=7.0 Atoms=20
N    -0.63120002   -0.79659998    0.79250002
N     2.03369999   -0.27239999   -0.14070000
N     2.67319989   -2.89700007   -1.11530006
N     0.67240000   -3.09459996   -3.16599989
N     1.54449999   -0.92240000   -4.82980013
N     4.13469982   -1.93789995   -5.54180002
N     3.30060005   -4.29990005   -6.94610023
N     1.84749997   -3.04220009   -9.08010006
N     4.01739979   -1.59959996  -10.28750038
N     5.64340019   -3.83629990  -11.06270027
N     3.82100010   -5.07670021  -12.90310001
N     3.64930010   -2.95779991  -14.83390045
N     6.39629984   -2.91330004  -15.67039967
N     6.55560017   -5.56239986  -16.76779938
N     4.62690020   -5.27239990  -18.87570000
N     5.95599985   -3.23219991  -20.39839935
N     8.32750034   -4.69290018  -21.09840012
N     7.10659981   -6.78009987  -22.64769936
N     5.99639988   -5.16529989  -24.74710083
N     8.44299984   -4.11229992  -25.82060051
Charge=8.0 Atoms=21
O     0.97780001   -0.15680000   -2.18120003
O     3.74079990   -1.70070004   -2.76489997
O     2.36129999   -4.17299986   -4.29580021
O     0.91039997   -2.35139990   -6.51739979
O     3.62500000   -0.97970003   -7.57009983
O     5.07399988   -3.75740004   -8.30729961
O     2.76370001   -4.75339985  -10.31459999
O     2.92569995   -2.17179990  -12.22980022
O     6.05329990   -2.52029991  -12.90439987
O     5.75680017   -5.50589991  -14.06939983
O     3.59369993   -4.71490002  -16.31749916
O     5.45389986   -2.49900007  -17.72760010
O     7.88929987   -4.51709986  -18.32349968
O     6.11679983   -6.60109997  -20.01880074
O     5.11969995   -4.42999983  -22.17539978
O     8.08170033   -3.55870008  -23.08460045
O     8.99740028   -6.52530003  -23.93280029
O     6.61089993   -6.96019983  -26.04809952
O     7.33059978   -4.36980009  -27.81760025
O     9.03800011   -6.18200016  -27.42650032
O    11.18210030   -5.51450014  -27.85530090
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > 00203atoms_1113basfunc_gc_pariK.dal <<'%EOF%'
**PROFILE
.EXCHANGE
**INTEGRALS
.PARI-K
**WAVE FUNCTIONS
.HF
*DENSOPT
.START
H1DAIG
.GCBASIS
*END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >00203atoms_1113basfunc_gc_pariK.check
cat >> 00203atoms_1113basfunc_gc_pariK.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi
CRIT1=`$GREP "Exchange energy, mat_dotproduct\(D,K\)\= * 34080\.846401" $log | wc -l`
TEST[1]=`expr  $CRIT1`
CTRL[1]=1
ERROR[1]="ENERGY NOT CORRECT -"

PASSED=1
for i in 1
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
      echo ${ERROR[i]}
      PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
   echo PROF ENDED PROPERLY
   exit 0
else
   echo THERE IS A PROBLEM
   exit 1
fi

%EOF%
#######################################################################
