#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > 00053atoms_1160basfunc_gc_dfJ.info <<'%EOF%'
   00053atoms_1160basfunc_gc_dfJ
   -------------
   Molecule:         Silicium Molecule/Turbomole-SVP
   Wave Function:    HF
   Profile:          Density-fitted Coulomb Matrix
   CPU tiem:         4 min
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > 00053atoms_1160basfunc_gc_dfJ.mol <<'%EOF%'
ATOMBASIS
================================
================================
Atomtypes=3 Nosymmetry
Charge=1.0  Atoms=36  Bas=Turbomole-SVP  Aux=Ahlrichs-Coulomb-Fit
H1           7.77282338704976     -2.66377684305221     -1.99570385580936
H2           6.87810420727967      0.41538636871322     -1.07289956636961
H3           5.59641824999014     -0.92856984384710     -3.84314924848234
H4           6.36515505818528     -4.44552401726367      3.34917483940901
H5           3.24253570444950     -4.22287837494305      4.50373703054410
H6           5.13455028778046     -1.48484474380921      4.28764873787721
H7           1.03723854466486     -6.76099221013544     -0.40377967085351
H8           4.22721718612604     -7.20848691543842     -1.28951320289925
H9           2.10215401815637     -5.72116474067934     -3.38839799485938
H10         -0.75477740130981      8.23572124999756      1.76025531899190
H11         -2.19189522210619      5.69462731670606      3.37607320107217
H12         -2.87734235134224      6.21683423408679      0.15416007782473
H13          5.52017158029890      3.25212984398609      2.75341033261291
H14          3.08585284224791      3.49720464568426      5.01996674419147
H15          4.37029402022768      6.25590243199490      3.64136618258165
H16          4.40788634203217      4.30766660671926     -2.99440899505947
H17          3.58903021754995      7.39011983166831     -2.00007101288422
H18          1.46632353805815      5.61596179757483     -3.86550092908876
H19         -3.26884825101391      4.27837018260349     -4.43204082136184
H20         -5.67003442091539      2.62127123332273     -2.81599995159882
H21         -5.35456921078734      2.30036739140695     -6.12632202187797
H22          1.50735327168401     -1.93653653083581     -6.52749953985736
H23          1.49002070366557      1.39854662085913     -6.54034967750731
H24         -0.69239376247153     -0.29176804452064     -8.42201234112556
H25          0.34991113793444     -0.85396534615848      6.78963478901197
H26         -2.78011405248519     -0.73568360854288      7.95139683668328
H27         -1.41760639855582      1.96324780961259      6.53977331103919
H28         -5.86384095284248      2.39685113817074      2.61159772528889
H29         -7.26787533836860     -0.10739124595726      4.31987234776060
H30         -6.89121512713487     -0.34398873625871      1.01298768930281
H31         -4.59991653140177     -5.24527690034833      4.77728244604142
H32         -1.44014516204861     -5.67144415660464      3.79363086510301
H33         -3.87220000820186     -5.44408742705441      1.52280178275583
H34         -5.50720238990307     -3.32399801824572     -2.69326979868499
H35         -2.81841124213431     -4.96536310780978     -3.78851348675652
H36         -4.87486223395771     -3.48469087928455     -5.96552333617614
Charge=6.0  Atoms=12  Bas=Turbomole-SVP  Aux=Ahlrichs-Coulomb-Fit
C37          6.19021555189013     -1.33891820271108     -1.91156002064177
C38          4.66873279796954     -3.26696986324567      3.36078909617322
C39          2.62669474730146     -5.90750307496046     -1.40238087516674
C40         -1.38051863362669      6.27621131866021      1.57120333799530
C41          3.81997742673767      4.30015683509854      3.26829645098541
C42          2.85072177941945      5.49138727196300     -2.34167113532093
C43         -4.30603955252564      2.49713323444578     -4.35746844901734
C44          0.28733285730528     -0.27524238955757     -6.60354022940097
C45         -1.53356566276380     -0.09336002947918      6.43465540561030
C46         -6.00900215485999      0.34429676161708      2.74564355823919
C47         -3.21347738582547     -4.72163757056486      3.33833914980830
C48         -4.00110767581830     -3.30561854195404     -4.10233841460808
Charge=14.0  Atoms=5  Bas=Turbomole-SVP  Aux=Ahlrichs-Coulomb-Fit
Si49         3.50828410995510     -2.73504030495185      0.01218873350621
Si50         0.00000944863062      0.00002078698737      0.00000755890450
Si51         1.37624785258421      4.18002316588045      0.64981067397092
Si52        -2.08634834884692     -0.28192635086167     -3.91870805786408
Si53        -2.79817038560951     -1.16304517171018      3.25672187846983
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > 00053atoms_1160basfunc_gc_dfJ.dal <<'%EOF%'
**PROFILE
.COULOMB
**INTEGRALS
.DENSFIT
**WAVE FUNCTIONS
.HF
*DENSOPT
.START
H1DAIG
.GCBASIS
*END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >00053atoms_1160basfunc_gc_dfJ.check
cat >> 00053atoms_1160basfunc_gc_dfJ.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi
CRIT1=`$GREP "Coulomb energy, mat_dotproduct\(D,J\)\= * 3953\.60845[6-7]" $log | wc -l`
TEST[1]=`expr  $CRIT1`
CTRL[1]=1
ERROR[1]="ENERGY NOT CORRECT -"

PASSED=1
for i in 1
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
      echo ${ERROR[i]}
      PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
   echo PROF ENDED PROPERLY
   exit 0
else
   echo THERE IS A PROBLEM
   exit 1
fi

%EOF%
#######################################################################
