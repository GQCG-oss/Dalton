#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > 00168atoms_7518basfunc_gc_dfJ.info <<'%EOF%'
   00168atoms_7518basfunc_gc_dfJ
   -------------
   Molecule:         Valinomycin molecule/6-31+G*
   Wave Function:    HF
   Profile:          Density-fitted Coulomb Matrix
   CPU Time:         8 min 10 s
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > 00168atoms_7518basfunc_gc_dfJ.mol <<'%EOF%'
BASIS
6-31+G* Aux=df-def2
Valinomycin
http://www.zib.de/zibdoc/sw/chem/Xact/GamessUK/Guk6/html/part16/node50.html
Atomtypes=4   Charge=0.0 Nosymmetry Angstrom
Charge=6         Atoms=54
C      0.45782143          5.22338750          1.79499762
C      0.82492143         -0.88141250          3.24169762
C      1.03832143          2.76078750          2.18179762
C      1.07042143          2.15028750         -4.36420238
C      1.19942143          2.62628750          0.66339762
C      1.22102143          0.41198750          2.53989762
C      1.73802143         -2.70241250          4.71709762
C      1.95122143          4.10588750         -6.52710238
C      2.00442143         -1.44011250          4.02949762
C      2.05482143          1.73638750         -5.46720238
C      2.52442143         -0.45711250          5.11809762
C      2.71372143          3.25738750         -1.08410238
C      2.74062143         -0.63301250         -5.23800238
C      2.90272143          2.95738750         -5.91120238
C      3.46642143         -1.64701250         -4.45020238
C      3.50212143         -0.80891250         -2.27300238
C      3.50662143          4.56118750         -1.27030238
C      3.51732143          2.04678750         -1.48510238
C      3.91282143          2.45038750         -7.04280238
C      4.37592143         -0.19851250         -1.14140238
C      4.50522143         -2.38171250         -5.38120238
C      4.56432143         -1.15041250          0.04749762
C      5.14122143         -3.58191250         -4.66500238
C      5.26952143         -2.46451250         -0.51110238
C      5.47552143         -0.53991250          1.12179762
C      5.72262143         -1.57461250         -5.71070238
C     -0.03277857         -3.50951250         -4.13510238
C     -0.05597857          3.90928750          2.45389762
C     -0.08297857          4.15758750          4.00089762
C     -0.23607857         -3.34391250         -2.54510238
C     -0.81657857         -4.64771250         -1.94350238
C     -0.88927857          1.49838750         -3.15960238
C     -1.21037857         -2.17471250         -2.23000238
C     -1.23977857         -1.44011250          4.27299762
C     -1.42277857          0.13258750         -2.63110238
C     -1.50787857         -2.15401250         -0.72600238
C     -1.96707857          2.28478750         -3.89150238
C     -2.25627857         -0.97451250          5.31869762
C     -2.38937857         -3.27151250          6.47889762
C     -2.84637857          1.34318750          4.98919762
C     -3.05147857         -2.66101250          0.90689762
C     -3.16487857         -2.18511250          5.84869762
C     -3.63477857          2.38828750          4.21569762
C     -3.73067857          1.44668750          2.05279762
C     -3.76047857         -1.40911250          1.35099762
C     -3.97297857         -3.89231250          0.96419762
C     -4.04137857         -4.44071250          2.45389762
C     -4.14307857         -1.49181250          6.88709762
C     -4.58467857          0.84658750          0.99569762
C     -4.74117857          2.99878750          5.21839762
C     -4.82367857          1.81918750         -0.16730238
C     -5.34327857         -3.66471250          0.31969762
C     -5.54407857          3.02978750          0.24799762
C     -5.84867857          1.11558750         -1.19870238
Charge=1         Atoms=90
H      0.17012143         -0.92981250         -3.21880238
H      0.26132143         -2.63761250         -4.52660238
H      0.54942143         -1.55191250          2.55289762
H      0.65302143         -3.15411250         -2.12860238
H      0.66312143         -4.20551250         -4.31190238
H      0.81442143          4.47888750          4.30319762
H      0.86292143          5.81158750          2.49499762
H      1.03812143         -2.56011250          5.41699762
H      1.14762143          5.00338750          1.10519762
H      1.30652143          3.69508750         -7.17180238
H      1.41542143         -3.38061250          4.05679762
H      1.44512143          4.55158750         -5.78870238
H      1.55482143          1.36868750         -6.25120238
H      1.75382143          0.04658750          5.50859762
H      1.86142143          3.29828750         -1.60540238
H      1.90472143          2.98768750          2.62659762
H      2.51152143          4.78378750         -7.00310238
H      2.57812143         -3.03131250          5.14849762
H      2.75382143         -1.58731250          3.38399762
H      2.82242143         -2.32581250         -4.09730238
H      2.88572143          5.29168750         -1.55460238
H      2.98542143         -0.97261250          5.84049762
H      3.16862143          0.18708750          4.70589762
H      3.33152143          1.05438750          0.26739762
H      3.39792143          2.00078750         -7.77280238
H      3.41742143          3.32608750         -5.13720238
H      3.52152143          0.99068750         -4.12520238
H      3.67742143         -1.39031250          0.44219762
H      3.94312143          4.81268750         -0.40650238
H      4.04782143         -2.68471250         -6.21730238
H      4.20742143          4.42838750         -1.97110238
H      4.41142143          3.23108750         -7.41930238
H      4.43022143         -4.10611250         -4.19630238
H      4.56152143          1.80168750         -6.64490238
H      4.58342143         -3.05881250         -0.93070238
H      4.91862143         -0.05301250          1.79459762
H      5.27112143          0.04338750         -1.51560238
H      5.49092143         -0.88671250         -6.39860238
H      5.59862143         -4.16651250         -5.33520238
H      5.71492143         -2.94981250          0.24119762
H      5.80972143         -3.25591250         -3.99660238
H      5.95352143         -2.21111250         -1.19520238
H      5.98792143         -1.26761250          1.57779762
H      6.05542143         -1.12021250         -4.88440238
H      6.11462143          0.09908750          0.69369762
H      6.43552143         -2.17711250         -6.06940238
H     -0.08147857         -5.17491250         -1.51740238
H     -0.30657857          5.70018750          1.36109762
H     -0.30727857          3.30448750          4.47199762
H     -0.52707857          1.37778750          2.77989762
H     -0.53007857          2.03608750         -2.39680238
H     -0.77357857          4.84818750          4.21609762
H     -0.89657857         -3.78831250         -4.55480238
H     -0.95427857          3.64268750          2.10479762
H     -1.23857857         -5.19121250         -2.66910238
H     -1.50507857         -4.41991250         -1.25500238
H     -1.53837857          2.92368750         -4.53040238
H     -1.73797857         -2.88231250          7.13029762
H     -1.75897857         -0.60221250          6.10229762
H     -1.89287857         -3.77911250          5.77479762
H     -2.06927857         -2.36701250         -2.70470238
H     -2.23567857         -2.81761250          1.46369762
H     -2.51627857          2.79448750         -3.22930238
H     -2.55577857          1.65368750         -4.39660238
H     -3.01107857         -3.89021250          6.95929762
H     -3.03617857          3.11888750          3.88719762
H     -3.15617857         -4.83131250          2.70679762
H     -3.38767857         -0.27611250         -0.35940238
H     -3.52277857         -4.60751250          0.42959762
H     -3.60847857         -0.97241250          7.55379762
H     -3.70307857         -2.54001250          5.08419762
H     -3.78317857         -0.20611250          4.08119762
H     -3.96647857          2.03588750         -0.63450238
H     -4.26387857         -3.69011250          3.07609762
H     -4.30177857          3.63388750          5.85359762
H     -4.67697857         -2.19191250          7.36139762
H     -4.74697857         -5.14641250          2.51779762
H     -4.76137857         -0.87361250          6.40189762
H     -4.89767857          3.68558750          0.63809762
H     -5.17057857          2.25678750          5.73339762
H     -5.26747857         -2.95961250         -0.38540238
H     -5.33317857          0.58918750         -1.87480238
H     -5.43807857          3.48448750          4.69079762
H     -5.46967857          0.59818750          1.38969762
H     -5.66297857         -4.51681250         -0.09470238
H     -5.99507857          3.43858750         -0.54530238
H     -5.99547857         -3.36881250          1.01759762
H     -6.23067857          2.79058750          0.93459762
H     -6.38817857          1.81728750         -1.66400238
H     -6.46017857          0.50408750         -0.69660238
Charge=7         Atoms=6
N      0.46322143          1.47778750          2.68309762
N      2.91402143          0.74308750         -4.87990238
N      3.68062143          1.01208750         -0.66870238
N     -0.68627857         -0.94341250         -2.70270238
N     -3.05507857          0.04988750          4.71709762
N     -3.93257857         -0.33301250          0.47719762  
Charge=8         Atoms=18  
O      0.18632143          1.14658750         -4.10350238
O      0.36832143          2.26408750         -0.09000238
O      1.04302143          3.22638750         -3.78980238
O      1.94032143         -0.97451250         -6.13320238
O      2.31202143          0.41198750          1.91679762
O      2.33122143         -1.00551250         -2.17840238
O      2.42742143          3.12288750          0.38129762
O      4.08232143          2.04678750         -2.63960238
O      4.24642143         -1.08831250         -3.36590238
O     -0.29027857         -0.56061250          4.09109762
O     -0.66577857         -1.81261250          0.07189762
O     -1.27697857         -2.49551250          3.66999762
O     -1.99267857          1.75708750          5.75989762
O     -2.55897857          0.10158750         -2.22000238
O     -2.57497857          1.61228750          2.03419762
O     -2.73357857         -2.53691250         -0.47100238
O     -4.20897857         -1.31591250          2.52839762
O     -4.40987857          1.78818750          3.12999762
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > 00168atoms_7518basfunc_gc_dfJ.dal <<'%EOF%'
**INTEGRALS
.DENSFIT
**PROFILE
.COULOMB
**WAVE FUNCTIONS
.HF
*DENSOPT
.START
H1DIAG
.GCBASIS
*END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >00168atoms_7518basfunc_gc_dfJ.check
cat >> 00168atoms_7518basfunc_gc_dfJ.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi
CRIT1=`$GREP "Coulomb energy, mat_dotproduct\(D,J\)\= * 26097\.362404" $log | wc -l`
TEST[1]=`expr  $CRIT1`
CTRL[1]=1
ERROR[1]="ENERGY NOT CORRECT -"

PASSED=1
for i in 1
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
      echo ${ERROR[i]}
      PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
   echo PROF ENDED PROPERLY
   exit 0
else
   echo THERE IS A PROBLEM
   exit 1
fi

%EOF%
#######################################################################
