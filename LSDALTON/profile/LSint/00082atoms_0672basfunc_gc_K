#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > 00082atoms_0672basfunc_gc_K.info <<'%EOF%'
   00082atoms_0672basfunc_gc_K
   -------------
   Molecule:         alanine chain/3-21G
   Wave Function:    HF
   Profile:          Exchange Matrix
   CPU Time:         7 min 40 seconds
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > 00082atoms_0672basfunc_gc_K.mol <<'%EOF%'
BASIS
def2_sv_p
[8]OPP single point energy calculation

Atomtypes=2 Charge=0.0 Angstrom Nosymmetry
Charge=1.0 Atoms=34
H1               2.0326694293   0.7056390885  -3.3908190482
H2              -2.0326694293   0.7056390885   3.3908190482
H3               2.0326694293  -0.7056390885   3.3908190482
H4              -2.0326694293  -0.7056390885  -3.3908190482
H5              -2.0256367575   0.7256935660  -5.2632303100
H6               2.0256367575   0.7256935660   5.2632303100
H7              -2.0256367575  -0.7256935660   5.2632303100
H8               2.0256367575  -0.7256935660  -5.2632303100
H9               2.0324993068   0.7064879470  -0.9366659356
H10             -2.0324993068   0.7064879470   0.9366659356
H11              2.0324993068  -0.7064879470   0.9366659356
H12             -2.0324993068  -0.7064879470  -0.9366659356
H13             -2.0253840854   0.7265483038  -7.7173413713
H14              2.0253840854   0.7265483038   7.7173413713
H15             -2.0253840854  -0.7265483038   7.7173413713
H16              2.0253840854  -0.7265483038  -7.7173413713
H17              2.0388328698   0.6879301566  -9.5905286682
H18             -2.0388328698   0.6879301566   9.5905286682
H19              2.0388328698  -0.6879301566   9.5905286682
H20             -2.0388328698  -0.6879301566  -9.5905286682
H21              2.0389336574   0.6863447477 -12.0454641333
H22             -2.0389336574   0.6863447477  12.0454641333
H23              2.0389336574  -0.6863447477  12.0454641333
H24             -2.0389336574  -0.6863447477 -12.0454641333
H25             -2.0078046468   0.7760021389 -13.9057856401
H26              2.0078046468   0.7760021389  13.9057856401
H27             -2.0078046468  -0.7760021389  13.9057856401
H28              2.0078046468  -0.7760021389 -13.9057856401
H29             -2.0140328716   0.7626340785 -16.3769707780
H30              2.0140328716   0.7626340785  16.3769707780
H31             -2.0140328716  -0.7626340785  16.3769707780
H32              2.0140328716  -0.7626340785 -16.3769707780
H33              0.0000000000   0.0000000000  17.6323618244
H34              0.0000000000   0.0000000000 -17.6323618244
Charge=6.0 Atoms=48
C1               0.0000000000   0.0000000000   3.5848930702
C2               0.0000000000   0.0000000000  -3.5848930702
C3               0.0000000000   0.0000000000   5.0691053447
C4               0.0000000000   0.0000000000  -5.0691053447
C5               1.1370455076   0.3760773275  -2.8583986661
C6              -1.1370455076   0.3760773275   2.8583986661
C7               1.1370455076  -0.3760773275   2.8583986661
C8              -1.1370455076  -0.3760773275  -2.8583986661
C9              -1.1332758793   0.3872765865  -5.7955861629
C10              1.1332758793   0.3872765865   5.7955861629
C11             -1.1332758793  -0.3872765865   5.7955861629
C12              1.1332758793  -0.3872765865  -5.7955861629
C13              1.1369341606   0.3763515725  -1.4687736063
C14             -1.1369341606   0.3763515725   1.4687736063
C15              1.1369341606  -0.3763515725   1.4687736063
C16             -1.1369341606  -0.3763515725  -1.4687736063
C17             -1.1331298813   0.3875880645  -7.1852222068
C18              1.1331298813   0.3875880645   7.1852222068
C19             -1.1331298813  -0.3875880645   7.1852222068
C20              1.1331298813  -0.3875880645  -7.1852222068
C21              0.0000000000   0.0000000000   9.3962242397
C22              0.0000000000   0.0000000000  -9.3962242397
C23              1.1403025212   0.3660556885 -10.1227361059
C24             -1.1403025212   0.3660556885  10.1227361059
C25              1.1403025212  -0.3660556885  10.1227361059
C26             -1.1403025212  -0.3660556885 -10.1227361059
C27              1.1403886331   0.3656688886 -11.5124769156
C28             -1.1403886331   0.3656688886  11.5124769156
C29              1.1403886331  -0.3656688886  11.5124769156
C30             -1.1403886331  -0.3656688886 -11.5124769156
C31              0.0000000000   0.0000000000   7.9118753946
C32              0.0000000000   0.0000000000  -7.9118753946
C33              0.0000000000   0.0000000000  13.7241574441
C34              0.0000000000   0.0000000000 -13.7241574441
C35             -1.1256632822   0.4211938162 -14.4446806304
C36              1.1256632822   0.4211938162  14.4446806304
C37             -1.1256632822  -0.4211938162  14.4446806304
C38              1.1256632822  -0.4211938162 -14.4446806304
C39             -1.1266374996   0.4218782428 -15.8365376234
C40              1.1266374996   0.4218782428  15.8365376234
C41             -1.1266374996  -0.4218782428  15.8365376234
C42              1.1266374996  -0.4218782428 -15.8365376234
C43              0.0000000000   0.0000000000  16.5391119222
C44              0.0000000000   0.0000000000 -16.5391119222
C45              0.0000000000   0.0000000000  12.2386420723
C46              0.0000000000   0.0000000000 -12.2386420723
C47              0.0000000000   0.0000000000  -0.7421395231
C48              0.0000000000   0.0000000000   0.7421395231
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > 00082atoms_0672basfunc_gc_K.dal <<'%EOF%'
**PROFILE
.EXCHANGE
**WAVE FUNCTIONS
.DFT
 CAMB3LYP
*DENSOPT
.RH
.DIIS
.CONVTHR
 1.0D-7
*END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >00082atoms_0672basfunc_gc_K.check
cat >> 00082atoms_0672basfunc_gc_K.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi
CRIT1=`$GREP "Exchange energy, mat_dotproduct\(D,K\)\= * \-770\.375637" $log | wc -l`
TEST[1]=`expr  $CRIT1`
CTRL[1]=1
ERROR[1]="ENERGY NOT CORRECT -"

PASSED=1
for i in 1
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
      echo ${ERROR[i]}
      PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
   echo PROF ENDED PROPERLY
   exit 0
else
   echo THERE IS A PROBLEM
   exit 1
fi

%EOF%
#######################################################################
