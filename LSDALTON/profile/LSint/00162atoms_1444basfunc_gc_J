#!/bin/sh
#
# This is the script for generating files for a specific Dalton test job.
#
# For the .check file ksh or bash is preferred, otherwise use sh
# (and hope it is not the old Bourne shell, which will not work)
#
if [ -x /bin/ksh ]; then
   CHECK_SHELL='#!/bin/ksh'
elif [ -x /bin/bash ]; then
   CHECK_SHELL='#!/bin/bash'
else
   CHECK_SHELL='#!/bin/sh'
fi


#######################################################################
#  TEST DESCRIPTION
#######################################################################
cat > 00162atoms_1444basfunc_gc_J.info <<'%EOF%'
   00162atoms_1444basfunc_gc_J
   -------------
   Molecule:         linear C160H2 molecule/3-21G
   Wave Function:    HF
   Profile:          Coulomb Matrix
   CPU Time:         1 min 40 seconds
%EOF%

#######################################################################
#  MOLECULE INPUT
#######################################################################
cat > 00162atoms_1444basfunc_gc_J.mol <<'%EOF%'
BASIS
3-21G
C160H2 molecule based on an optimized C40H2 
structur using b3lyp/6-311+g(d,p)
Atomtypes=2 Nosymmetry Angstrom
Charge=6. Atoms=160
C         0.00000000      0.00000000      1.08290700
C         0.00000000      0.00000000      2.29461600
C         0.00000000      0.00000000      3.64429100
C         0.00000000      0.00000000      4.86890900
C         0.00000000      0.00000000      6.20522000
C         0.00000000      0.00000000      7.43493100
C         0.00000000      0.00000000      8.76635300
C         0.00000000      0.00000000      9.99834400
C         0.00000000      0.00000000     11.32744700
C         0.00000000      0.00000000     12.56059500
C         0.00000000      0.00000000     13.88848500
C         0.00000000      0.00000000     15.12226000
C         0.00000000      0.00000000     16.44947800
C         0.00000000      0.00000000     17.68360100
C         0.00000000      0.00000000     19.01043900
C         0.00000000      0.00000000     20.24475800
C         0.00000000      0.00000000     21.57138600
C         0.00000000      0.00000000     22.80580700
C         0.00000000      0.00000000     24.13232900
C         0.00000000      0.00000000     25.36679500
C         0.00000000      0.00000000     26.69331700
C         0.00000000      0.00000000     27.92778300
C         0.00000000      0.00000000     29.25430500
C         0.00000000      0.00000000     30.48877100
C         0.00000000      0.00000000     31.81529300
C         0.00000000      0.00000000     33.04975900
C         0.00000000      0.00000000     34.37628100
C         0.00000000      0.00000000     35.61074700
C         0.00000000      0.00000000     36.93726900
C         0.00000000      0.00000000     38.17173500
C         0.00000000      0.00000000     39.49825700
C         0.00000000      0.00000000     40.73272300
C         0.00000000      0.00000000     42.05924500
C         0.00000000      0.00000000     43.29371100
C         0.00000000      0.00000000     44.62023300
C         0.00000000      0.00000000     45.85469900
C         0.00000000      0.00000000     47.18122100
C         0.00000000      0.00000000     48.41568700
C         0.00000000      0.00000000     49.74220900
C         0.00000000      0.00000000     50.97667500
C         0.00000000      0.00000000     52.30319700
C         0.00000000      0.00000000     53.53766300
C         0.00000000      0.00000000     54.86418500
C         0.00000000      0.00000000     56.09865100
C         0.00000000      0.00000000     57.42517300
C         0.00000000      0.00000000     58.65963900
C         0.00000000      0.00000000     59.98616100
C         0.00000000      0.00000000     61.22062700
C         0.00000000      0.00000000     62.54714900
C         0.00000000      0.00000000     63.78161500
C         0.00000000      0.00000000     65.10813700
C         0.00000000      0.00000000     66.34260300
C         0.00000000      0.00000000     67.66912500
C         0.00000000      0.00000000     68.90359100
C         0.00000000      0.00000000     70.23011300
C         0.00000000      0.00000000     71.46457900
C         0.00000000      0.00000000     72.79110100
C         0.00000000      0.00000000     74.02556700
C         0.00000000      0.00000000     75.35208900
C         0.00000000      0.00000000     76.58655500
C         0.00000000      0.00000000     77.91307700
C         0.00000000      0.00000000     79.14754300
C         0.00000000      0.00000000     80.47406500
C         0.00000000      0.00000000     81.70853100
C         0.00000000      0.00000000     83.03505300
C         0.00000000      0.00000000     84.26951900
C         0.00000000      0.00000000     85.59604100
C         0.00000000      0.00000000     86.83050700
C         0.00000000      0.00000000     88.15702900
C         0.00000000      0.00000000     89.39149500
C         0.00000000      0.00000000     90.71801700
C         0.00000000      0.00000000     91.95248300
C         0.00000000      0.00000000     93.27900500
C         0.00000000      0.00000000     94.51347100
C         0.00000000      0.00000000     95.83999300
C         0.00000000      0.00000000     97.07445900
C         0.00000000      0.00000000     98.40098100
C         0.00000000      0.00000000     99.63544700
C         0.00000000      0.00000000    100.96196900
C         0.00000000      0.00000000    102.19643500
C         0.00000000      0.00000000    103.52295700
C         0.00000000      0.00000000    104.75742300
C         0.00000000      0.00000000    106.08394500
C         0.00000000      0.00000000    107.31841100
C         0.00000000      0.00000000    108.64493300
C         0.00000000      0.00000000    109.87939900
C         0.00000000      0.00000000    111.20592100
C         0.00000000      0.00000000    112.44038700
C         0.00000000      0.00000000    113.76690900
C         0.00000000      0.00000000    115.00137500
C         0.00000000      0.00000000    116.32789700
C         0.00000000      0.00000000    117.56236300
C         0.00000000      0.00000000    118.88888500
C         0.00000000      0.00000000    120.12335100
C         0.00000000      0.00000000    121.44987300
C         0.00000000      0.00000000    122.68433900
C         0.00000000      0.00000000    124.01086100
C         0.00000000      0.00000000    125.24532700
C         0.00000000      0.00000000    126.57184900
C         0.00000000      0.00000000    127.80631500
C         0.00000000      0.00000000    129.13283700
C         0.00000000      0.00000000    130.36730300
C         0.00000000      0.00000000    131.69382500
C         0.00000000      0.00000000    132.92829100
C         0.00000000      0.00000000    134.25481300
C         0.00000000      0.00000000    135.48927900
C         0.00000000      0.00000000    136.81580100
C         0.00000000      0.00000000    138.05026700
C         0.00000000      0.00000000    139.37678900
C         0.00000000      0.00000000    140.61125500
C         0.00000000      0.00000000    141.93777700
C         0.00000000      0.00000000    143.17224300
C         0.00000000      0.00000000    144.49876500
C         0.00000000      0.00000000    145.73323100
C         0.00000000      0.00000000    147.05975300
C         0.00000000      0.00000000    148.29421900
C         0.00000000      0.00000000    149.62074100
C         0.00000000      0.00000000    150.85520700
C         0.00000000      0.00000000    152.18172900
C         0.00000000      0.00000000    153.41619500
C         0.00000000      0.00000000    154.74271700
C         0.00000000      0.00000000    155.97718300
C         0.00000000      0.00000000    157.30370500
C         0.00000000      0.00000000    158.53817100
C         0.00000000      0.00000000    159.86469300
C         0.00000000      0.00000000    161.09915900
C         0.00000000      0.00000000    162.42568100
C         0.00000000      0.00000000    163.66014700
C         0.00000000      0.00000000    164.98666900
C         0.00000000      0.00000000    166.22113500
C         0.00000000      0.00000000    167.54765700
C         0.00000000      0.00000000    168.78212300
C         0.00000000      0.00000000    170.10864500
C         0.00000000      0.00000000    171.34311100
C         0.00000000      0.00000000    172.66963300
C         0.00000000      0.00000000    173.90409900
C         0.00000000      0.00000000    175.23062100
C         0.00000000      0.00000000    176.46508700
C         0.00000000      0.00000000    177.79160900
C         0.00000000      0.00000000    179.02607500
C         0.00000000      0.00000000    180.35259700
C         0.00000000      0.00000000    181.58706300
C         0.00000000      0.00000000    182.91358500
C         0.00000000      0.00000000    184.14800600
C         0.00000000      0.00000000    185.47463400
C         0.00000000      0.00000000    186.70895300
C         0.00000000      0.00000000    188.03579100
C         0.00000000      0.00000000    189.26991400
C         0.00000000      0.00000000    190.59713200
C         0.00000000      0.00000000    191.83090700
C         0.00000000      0.00000000    193.15879700
C         0.00000000      0.00000000    194.39194500
C         0.00000000      0.00000000    195.72104800
C         0.00000000      0.00000000    196.95303900
C         0.00000000      0.00000000    198.28446100
C         0.00000000      0.00000000    199.51417200
C         0.00000000      0.00000000    200.85048300
C         0.00000000      0.00000000    202.07510100
C         0.00000000      0.00000000    203.42477600
C         0.00000000      0.00000000    204.63648500
Charge=1. Atoms=2
H         0.00000000      0.00000000      0.00000000
H         0.00000000      0.00000000    205.71939200
%EOF%

#######################################################################
#  DALTON INPUT
#######################################################################
cat > 00162atoms_1444basfunc_gc_J.dal <<'%EOF%'
**PROFILE
.COULOMB
**WAVE FUNCTIONS
.HF
*DENSOPT
.START
H1DIAG
.GCBASIS
*END OF INPUT
%EOF%

#######################################################################
#  CHECK SCRIPT
#######################################################################
echo $CHECK_SHELL >00162atoms_1444basfunc_gc_J.check
cat >> 00162atoms_1444basfunc_gc_J.check <<'%EOF%'
log=$1

if [ `uname` = Linux ]; then
   GREP="egrep -a"
else
   GREP="egrep"
fi
CRIT1=`$GREP "Coulomb energy, mat_dotproduct\(D,J\)\= * 18841\.4[2-3]" $log | wc -l`
TEST[1]=`expr  $CRIT1`
CTRL[1]=1
ERROR[1]="ENERGY NOT CORRECT -"

PASSED=1
for i in 1
do
   if [ ${TEST[i]} -ne ${CTRL[i]} ]; then
      echo ${ERROR[i]}
      PASSED=0
   fi
done

if [ $PASSED -eq 1 ]
then
   echo PROF ENDED PROPERLY
   exit 0
else
   echo THERE IS A PROBLEM
   exit 1
fi

%EOF%
#######################################################################
